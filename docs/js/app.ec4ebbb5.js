(function(t){function e(e){for(var i,s,r=e[0],l=e[1],d=e[2],u=0,h=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&h.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(h.length)h.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={app:0},a=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/node-tree-editor/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var c=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"0542":function(t,e,n){},2277:function(t,e,n){"use strict";n("f21b")},"28e0":function(t,e,n){"use strict";n("0542")},"31f4":function(t,e,n){"use strict";n("8748")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("tree")],1)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("context-menu",{ref:"contextMenu",scopedSlots:t._u([{key:"items",fn:function(){return[n("button",{staticClass:"context-menu-item",on:{click:t.addSibling}},[n("svg",{staticClass:"bi bi-node-plus",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 -3 16 16",id:"addSibling"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M11 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8zM6.025 7.5a5 5 0 1 1 0 1H4A1.5 1.5 0 0 1 2.5 10h-1A1.5 1.5 0 0 1 0 8.5v-1A1.5 1.5 0 0 1 1.5 6h1A1.5 1.5 0 0 1 4 7.5h2.025zM11 5a.5.5 0 0 1 .5.5v2h2a.5.5 0 0 1 0 1h-2v2a.5.5 0 0 1-1 0v-2h-2a.5.5 0 0 1 0-1h2v-2A.5.5 0 0 1 11 5zM1.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1z"}})]),t._v(" Add sibling ")]),n("button",{staticClass:"context-menu-item",on:{click:t.addChild}},[n("svg",{staticClass:"bi bi-diagram-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 -2 16 16",id:"addChild"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M6 3.5A1.5 1.5 0 0 1 7.5 2h1A1.5 1.5 0 0 1 10 3.5v1A1.5 1.5 0 0 1 8.5 6v1H11a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0V8h-5v.5a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 5 7h2.5V6A1.5 1.5 0 0 1 6 4.5v-1zM8.5 5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1zM3 11.5A1.5 1.5 0 0 1 4.5 10h1A1.5 1.5 0 0 1 7 11.5v1A1.5 1.5 0 0 1 5.5 14h-1A1.5 1.5 0 0 1 3 12.5v-1zm1.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zm4.5.5a1.5 1.5 0 0 1 1.5-1.5h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1A1.5 1.5 0 0 1 9 12.5v-1zm1.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1z"}})]),t._v("Add child ")]),t.tree.lastNode.getChildren().length?n("button",{staticClass:"context-menu-item",on:{click:t.pushRootToQuery}},[n("svg",{staticClass:"bi bi-arrow-bar-down",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 -2 16 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M1 3.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5zM8 6a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 0 1 .708-.708L7.5 12.293V6.5A.5.5 0 0 1 8 6z"}})]),t._v(" Drill down ")]):t._e(),t.tree.lastNode.collapsed?n("button",{staticClass:"context-menu-item",on:{click:t.collapseLastNode}},[n("svg",{staticClass:"bi bi-arrows-expand",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",fill:"currentColor",viewBox:"0 -1 16 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10z"}})]),t._v(" Expand ")]):n("button",{staticClass:"context-menu-item",on:{click:t.collapseLastNode}},[n("svg",{staticClass:"bi bi-arrows-collapse",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",fill:"currentColor",viewBox:"0 -1 16 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"}})]),t._v(" Collapse ")]),n("button",{staticClass:"context-menu-item",on:{click:t.editLastNode}},[n("svg",{staticClass:"bi bi-pencil",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",viewBox:"1 -1 16 16"}},[n("path",{attrs:{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"}})]),t._v("Edit ")]),n("button",{staticClass:"context-menu-item",on:{click:t.deleteLastNode}},[n("svg",{staticClass:"bi bi-node-minus",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 -3 16 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M11 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8zM6.025 7.5a5 5 0 1 1 0 1H4A1.5 1.5 0 0 1 2.5 10h-1A1.5 1.5 0 0 1 0 8.5v-1A1.5 1.5 0 0 1 1.5 6h1A1.5 1.5 0 0 1 4 7.5h2.025zM1.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zM8 8a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5A.5.5 0 0 1 8 8z"}})]),t._v(" Delete ")])]},proxy:!0}])}),n("toolbar"),n("div",{ref:"container",staticClass:"tree-container",class:{dragging:t.nodeDrag.dragging},on:{mousewheel:t.handleZoom,mouseup:function(e){return"button"in e&&1!==e.button?null:t.handleZoom(e)}}},[n("svg",{ref:"svg",staticClass:"svg vue-tree",style:t.initialTransformStyle}),n("div",{ref:"domContainer",staticClass:"dom-container",style:t.initialTransformStyle},t._l(t.nodeDataList,(function(e){return n("div",{key:e.data._key,staticClass:"node-slot",style:{left:t.formatDimension(e.y),top:t.formatDimension(e.x),width:t.formatDimension(t.config.nodeWidth),height:t.formatDimension(t.config.nodeHeight)},on:{dragover:function(n){return n.stopPropagation(),t.mouseOverNode(n,e)},dragend:function(n){return t.onDrop(n,e)}}},[n("div",{staticClass:"node-slot-overlay",class:{"node-top":"top"===t.nodeDrag.snap&&t.isDraggedOver(e.data),"node-bottom":"bottom"===t.nodeDrag.snap&&t.isDraggedOver(e.data),"node-right":"right"===t.nodeDrag.snap&&t.isDraggedOver(e.data)}},[n("div",{staticClass:"node",class:{dragover:t.isDraggedOver(e.data),highlighted:e.data._gid===t.tree.lastNode._gid,stack:e.data.childrenLength&&e.data.collapsed},attrs:{draggable:""},on:{mousedown:function(t){t.stopPropagation()},mouseup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:t.setLastNode(e.data,n)},contextmenu:function(n){return t.nodeContextClick(n,e.data)},dragstart:function(n){return t.startDrag(n,e)},drag:function(n){return t.onDrag(n,e)}}},[n("div",{staticStyle:{display:"flex",gap:"0.5rem"}},[!e.data.editing&&e.data.emoji&&e.data.emoji.length?n("div",t._l(t.emojifyArray(e.data.emoji),(function(e,i){return n("span",{key:i},[t._v(t._s(e)+" ")])})),0):t._e(),e.data.editing?t._e():n("pre",{domProps:{textContent:t._s(e.data.name)}}),!t.tree._query.length||e.data._parentNode||e.ediiting?t._e():n("button",{on:{click:t.spliceRootsQuery}},[n("svg",{staticClass:"bi bi-arrow-bar-up",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M8 10a.5.5 0 0 0 .5-.5V3.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 3.707V9.5a.5.5 0 0 0 .5.5zm-7 2.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5z"}})])])]),e.data.editing?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.data._name,expression:"node.data._name"}],ref:"node-#"+e.data._gid,refInFor:!0,domProps:{value:e.data._name},on:{blur:function(n){return t.blurLastNode(e.data)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelNodeEdit(e)},input:function(n){n.target.composing||t.$set(e.data,"_name",n.target.value)}}}):t._e(),n("div",{staticClass:"controls"},[n("button",{staticClass:"add-child",on:{click:function(e){return t.addSibling()}}},[n("svg",{attrs:{width:"16",height:"16",viewBox:"0 2 16 16"}},[n("use",{attrs:{href:"#addSibling"}})])]),n("button",{staticClass:"add-sibling",on:{click:function(e){return t.addChild()}}},[n("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16"}},[n("use",{attrs:{href:"#addChild"}})])])])])])])})),0)])],1)},r=[],l=n("3835"),d=n("2909"),c=(n("a15b"),n("99af"),n("d81d"),n("466d"),n("ac1f"),n("d3b7"),n("25f0"),n("fb6a"),n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("modal",{attrs:{name:"info-modal",adaptive:!0,height:"auto",width:"500px"}},[n("div",{attrs:{id:"modal"}},[n("table",{staticClass:"info-table"},t._l(t.events,(function(e,i){return n("tr",{key:i,staticClass:"info-row"},[n("td",{staticClass:"info-col-action"},[t._v(" "+t._s(e.name)+" ")]),n("td",{staticClass:"info-col-hotkey"},[t._v(" "+t._s(e.hotkey.join(" / "))+" ")])])})),0)])]),n("breadcrumb"),n("div",{staticClass:"buttons"},[n("documents-list"),n("button",{on:{click:t.toggleEmojiBar}},[n("svg",{staticClass:"bi bi-emoji-smile",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}}),n("path",{attrs:{d:"M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"}})])]),n("button",{on:{click:function(e){return t.$modal.show("info-modal")}}},[n("svg",{staticClass:"bi bi-question",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"}})])])],1),n("emoji-bar",{ref:"emojiBar"})],1)}),u=[],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway:mousedown",value:t.close,expression:"close",arg:"mousedown"}],staticClass:"docs"},[n("button",{staticClass:"doc-menu-toggle",on:{click:function(e){t.showMenu=!t.showMenu}}},[n("svg",{staticClass:"bi bi-file-earmark-text",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5z"}}),n("path",{attrs:{d:"M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5L9.5 0zm0 1v2A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showMenu,expression:"showMenu"}],staticClass:"doc-menu"},[n("button",{staticClass:"doc-new",on:{click:t.createNewDocument}},[n("svg",{staticClass:"bi bi-file-earmark-plus",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M8 6.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 .5-.5z"}}),n("path",{attrs:{d:"M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"}})])]),n("div",{staticClass:"doc-list"},t._l(t.documents,(function(e,i){return n("div",{key:i,staticClass:"doc",class:{active:t.activeDoc(i)},on:{click:function(e){return t.setDocument(i)}}},[n("span",[t._v(t._s(e.name))]),n("span",[e.lastEdit?n("span",[t._v(t._s(t.timeAgo(e.lastEdit)))]):t._e(),n("button",{on:{click:function(e){return e.stopPropagation(),t.deleteDocument(i)}}},[n("svg",{staticClass:"bi bi-trash",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}}),n("path",{attrs:{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}})])])])])})),0)])])},f=[],v=n("d4ec"),g=(n("b0c0"),n("a434"),n("b64b"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("2f62")),m=n("0e44");i["default"].use(g["a"]);var p=function t(e,n){Object(v["a"])(this,t),this.name=e,this.data=n,this.lastEdit=Date.now()},w=new g["a"].Store({state:{favoriteEmojis:[],settings:{lastDocument:""},documents:{}},plugins:[Object(m["a"])()],mutations:{addFavoriteEmoji:function(t,e){return t.favoriteEmojis.push(e)},removeFavoriteEmoji:function(t,e){return t.favoriteEmojis.splice(t.favoriteEmojis.indexOf(e),1)},setDocument:function(t,e){e&&(t.settings.lastDocument=e)},createDocument:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:"document",data:{}},n=y();t.documents[n]=new p(e.name,e.data),this.commit("setDocument",n)},saveDocument:function(t,e){t.documents[t.settings.lastDocument]&&(t.documents[t.settings.lastDocument].lastEdit=Date.now(),t.documents[t.settings.lastDocument].data=e)},deleteDocument:function(t,e){delete t.documents[e];var n=Object.keys(t.documents);n.length?w.commit("setDocument",n[0]):this.commit("createDocument")}},getters:{documents:function(t){return t.documents},treeData:function(t){return t.documents[t.settings.lastDocument]?t.documents[t.settings.lastDocument].data:{}}}});function y(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}var _=n("b85c"),N=n("bee2"),b=(n("caad"),n("2532"),n("498a"),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{name:"",firstEdit:!0,collapsed:!1,children:[],emoji:[]};Object(v["a"])(this,t),this._gid=e,this._id=n,this._name=a.name,this._parentNode=i,this._children=a.children,this._collapsed=a.collapsed,this._depth=o,this._editing=!!a.firstEdit&&null!==i,this._firstEdit=a.firstEdit,this._emoji=a.emoji||[]}return Object(N["a"])(t,[{key:"addChild",value:function(e){e instanceof t&&this._children.push(e)}},{key:"addChildAtIndex",value:function(e,n){e instanceof t&&!(n<0)&&this._children.splice(n,0,e)}},{key:"toggleEmoji",value:function(t){this._emoji.includes(t)?this._emoji.splice(this._emoji.indexOf(t),1):this._emoji.push(t)}},{key:"getChildren",value:function(){return this._children}},{key:"delete",value:function(){var t=this._parentNode._children.indexOf(this);this._parentNode.children.splice(t,1)}},{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"parent",get:function(){return this._parentNode},set:function(t){this._parentNode=t}},{key:"children",get:function(){return this.collapsed?[]:this._children},set:function(t){this._children=t}},{key:"collapsed",get:function(){return this._collapsed},set:function(t){this._children.length&&(this._collapsed=t)}},{key:"name",get:function(){return this._name||"node #".concat(this._gid)},set:function(t){this._name=t,this.editing=!1}},{key:"editing",get:function(){return this._editing},set:function(t){this._editing=t,this._firstEdit=!1}},{key:"depth",get:function(){return this._depth}},{key:"childrenLength",get:function(){return this._children.length}},{key:"firstEdit",get:function(){return this._firstEdit}},{key:"emoji",get:function(){return this._emoji}}]),t}()),k=function(){function t(){Object(v["a"])(this,t),this._name="root",this._root=new b(this.counter,0,null,0,{name:"root"}),this.lastNode=this._root,this._query=[],this._counter=0,this.isRoot=!0,this.parseTreeData(w.getters.treeData)}return Object(N["a"])(t,[{key:"addSibling",value:function(){if(this._lastNode.editing)return this._lastNode.editing=!1,void(this._lastNode._name=this._lastNode._name.trim());var t=this.createNode(this.lastNodeID,this.lastNodeParent?this.lastNodeParent:this._root,this._lastNode.depth||1);this.lastNodeParent?this.pushNode(this.lastNodeParent.children,t):this.pushNode(this._root.children,t),this.lastNode=t}},{key:"addChild",value:function(){this._lastNode.editing&&(this._lastNode.editing=!1,this._lastNode._name=this._lastNode._name.trim());var t=this._lastNode?this._lastNode.children.length:this.lastNodeID,e=this.createNode(t,this._lastNode,(this._lastNode.depth||0)+1);this._lastNode?this.pushNode(this._lastNode.children,e):this.pushNode(this._root,e),this.lastNode=e,this.lastNodeParent.collapsed=!1}},{key:"cloneNode",value:function(t,e,n){var i=this;function o(t,e){var n=new b(i.counter,t.id,e,t.depth,{name:t.name,collapsed:!1,firstEdit:t.firstEdit,children:[]});return n.children=t.getChildren().map((function(t){return o(t,n)})),n}var a=o(t,"bottom"===n||"top"===n?e.parent:e);if(t.delete(),n&&"right"!==n)if(n&&"top"!==n){if(n&&"bottom"!==n)return;e.parent.addChildAtIndex(a,e.parent._children.indexOf(e)+1)}else e.parent.addChildAtIndex(a,e.parent._children.indexOf(e));else e.addChild(a);this.lastNode=a}},{key:"pushNode",value:function(t,e){t.push(e)}},{key:"createNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return new b(this.counter,t,e,n)}},{key:"deleteLastNode",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{force:!1};if(!this._lastNode.editing&&this.lastNodeParent||n.force){var i=null;i=this._lastNode.id-1>=0?this.lastNodeParent.children[this._lastNode.id-1]:null!==(t=this.lastNodeParent)&&void 0!==t&&null!==(e=t.parent)&&void 0!==e&&e.children?this.lastNodeParent.parent.children[this.lastNodeParent.parent.children.length-1]:this.lastNodeParent,this.lastNodeParent.children.splice(this._lastNode.id,1),this.lastNode=i}}},{key:"collapseLastNode",value:function(){this._lastNode.editing||(this._lastNode.collapsed=!this._lastNode.collapsed)}},{key:"editLastNode",value:function(){this._lastNode.editing||(this._lastNode.editing=!0)}},{key:"blurLastNode",value:function(t){t&&this._lastNode._gid===t._gid&&(this._lastNode._firstEdit?this.deleteLastNode({force:!0}):this._lastNode.editing=!1)}},{key:"goUp",value:function(){var t;if(!this._lastNode.editing)if(this._lastNode.id-1>=0)this.lastNode=this.lastNodeParent.children[this._lastNode.id-1];else if((null===(t=this.lastNodeParent)||void 0===t?void 0:t.id)>0&&this.lastNodeParent.parent){for(var e,n=this.lastNodeParent.id-1;n>=0;n--)if(this.lastNodeParent.parent.children[n].children.length){e=this.lastNodeParent.parent.children[n];break}e&&(this.lastNode=e.children[e.children.length-1])}}},{key:"goDown",value:function(){if(!this._lastNode.editing&&this.lastNodeParent)if(this._lastNode.id+1<this.lastNodeParent.children.length)this.lastNode=this.lastNodeParent.children[this._lastNode.id+1];else if(this.lastNodeParent.parent&&this.lastNodeParent.id<this.lastNodeParent.parent.children.length){for(var t,e=this.lastNodeParent.id+1;e<this.lastNodeParent.parent.children.length;e++)if(this.lastNodeParent.parent.children[e].children.length){t=this.lastNodeParent.parent.children[e];break}t&&(this.lastNode=t.children[0])}}},{key:"goLeft",value:function(){var t,e;this._lastNode.editing||null!==(t=this._lastNode)&&void 0!==t&&null!==(e=t.parent)&&void 0!==e&&e.parent&&(this.lastNode=this._lastNode.parent)}},{key:"goRight",value:function(){if(!this._lastNode.editing&&this._lastNode&&this._lastNode.children.length){var t=Math.floor(this._lastNode.children.length/2);this.lastNode=this._lastNode.children[t]}}},{key:"getChildren",value:function(){return this._root._children}},{key:"exportToStore",value:function(){return t(this._query.length?this._query[0]:this._root);function t(e){var n;return{name:e.name,collapsed:e.collapsed||!1,children:null!==(n=e.getChildren())&&void 0!==n&&n.length?e.getChildren().map((function(e){return e.getChildren().length?t(e):{name:e.name,children:[],emoji:e.emoji}})):[],emoji:e.emoji}}}},{key:"parseTreeData",value:function(t){if(t){var e=this;if(this._root.children=[],this._lastNode=this._root,this._counter=0,t.children){var n,i=Object(_["a"])(t.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;a(o,this._root)}}catch(r){i.e(r)}finally{i.f()}}}function a(t,n){var i=new b(e.counter,n.children.length,n,n.depth+1||0,{name:t.name,firstEdit:!1,collapsed:t.collapsed||!1,emoji:t.emoji});i.children=t.children.length?s(t,i):[],n.children.push(i)}function s(t,n){var i;return null===t||void 0===t||null===(i=t.children)||void 0===i?void 0:i.map((function(t,i){var o=new b(e.counter,i,n,n.depth+1,{name:t.name,firstEdit:!1,collapsed:t.collapsed||!1,emoji:t.emoji});return o.children=null!==t&&void 0!==t&&t.children.length?s(t,o):[],o}))}}},{key:"spliceRootsQuery",value:function(t){if(!(t<=0||t>this._query.length)){t>1&&(this._query=this._query.slice(0,-(t-1)));var e=this._query.pop();this._name=e.name,this._root=e}}},{key:"pushRootToQuery",value:function(t){t&&t instanceof b&&(this._query.push(this._root),t.collapsed=!1,this._root=t)}},{key:"sortLastNode",value:function(t,e){console.log(t,e),this.lastNode._children.sort((function(t,e){return t.name<e.name?-1:1}))}},{key:"name",get:function(){return this._root.name}},{key:"children",get:function(){return this._root.children}},{key:"lastNodeID",get:function(){return this.lastNodeParent?this.lastNodeParent.children.length:this._root.children.length}},{key:"lastNode",get:function(){return this._lastNode},set:function(t){var e;if(!(t instanceof b))return null!==t&&void 0!==t&&t._root?null:console.error("".concat(t," is not instance of Node"));null!==this&&void 0!==this&&null!==(e=this._lastNode)&&void 0!==e&&e.editing&&(this._lastNode.editing=!1),this._lastNode=t}},{key:"lastNodeParent",get:function(){var t;return(null===(t=this._lastNode)||void 0===t?void 0:t.parent)||null}},{key:"counter",get:function(){return this._counter++}},{key:"root",get:function(){return this._root}},{key:"query",get:function(){return this._query}},{key:"emoji",get:function(){return this._root.emoji}}]),t}(),x=new k,C=n("723b"),D={name:"DocumentsList",mixins:[C["mixin"]],data:function(){return{store:w,showMenu:!1}},watch:{documents:function(t){return console.log(t)}},computed:{documents:function(){return w.state.documents}},methods:{setDocument:function(t){w.commit("setDocument",t),x.parseTreeData(w.getters.treeData)},createNewDocument:function(){w.commit("createDocument"),x.parseTreeData(w.getters.treeData)},deleteDocument:function(t){w.commit("deleteDocument",t),x.parseTreeData(w.getters.treeData)},activeDoc:function(t){return t===w.state.settings.lastDocument},timeAgo:function(t){var e=new Date(t),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return"".concat(e.getHours(),":").concat(e.getMinutes()," ").concat(e.getDate()," ").concat(n[e.getMonth()])},close:function(){this.showMenu&&(this.showMenu=!1)}}},j=D,L=(n("ff3f"),n("2877")),M=Object(L["a"])(j,h,f,!1,null,"6cb6ebc8",null),E=M.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"breadcrumb"},[n("span",t._l(t.query,(function(e,i){return n("span",{key:i},[n("a",{attrs:{href:"#"},on:{click:function(e){return t.popStack(i)}}},[t._v(t._s(e))]),i+1<t.queryLen?n("svg",{staticClass:"bi bi-chevron-right",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 -4 16 18"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"}})]):t._e()])})),0)])},A=[],O={name:"Breadcrumb",computed:{query:function(){return x.query.map((function(t){return t.name}))},queryLen:function(){return x.query.length}},methods:{popStack:function(t){x.spliceRootsQuery(x.query.length-t)}}},P=O,S=(n("28e0"),Object(L["a"])(P,z,A,!1,null,null,null)),T=S.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.shown,expression:"shown"}],staticClass:"bar"},[n("div",{staticClass:"title"},[n("div",{staticClass:"search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],attrs:{type:"text"},domProps:{value:t.searchInput},on:{keydown:function(t){t.stopPropagation()},mousewheel:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.searchInput=e.target.value)}}}),n("span",{staticClass:"input-icon"},[n("svg",{staticClass:"bi bi-search",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"}})])])]),n("button",{on:{click:t.close}},[n("svg",{staticClass:"bi bi-x",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"}})])])]),t.favorites.length?n("div",{staticClass:"favorites-list"},[n("span",{staticClass:"title"},[t._v("Favorites:")]),n("div",{staticClass:"flex-wrapper"},t._l(t.favorites,(function(e){return n("div",{key:e.key},[n("div",{staticClass:"emoji",class:{selected:t.isSelected(e.key)},attrs:{title:e.key},domProps:{textContent:t._s(e.emoji)},on:{click:function(n){return t.toggleEmoji(e.key)},contextmenu:function(n){return n.preventDefault(),t.toggleFavorite(e.key)}}})])})),0),n("hr")]):t._e(),t.currentNodeEmoji.length?n("div",{staticClass:"favorites-list"},[n("span",{staticClass:"title"},[t._v("Current node:")]),n("div",{staticClass:"flex-wrapper"},t._l(t.currentNodeEmoji,(function(e){return n("div",{key:e.key},[n("div",{staticClass:"emoji",attrs:{title:e.key},domProps:{textContent:t._s(e.emoji)},on:{click:function(n){return t.toggleEmoji(e.key)},contextmenu:function(n){return n.preventDefault(),t.toggleFavorite(e.key)}}})])})),0),n("hr")]):t._e(),t.searchInput?n("div",{staticClass:"emoji-list"},[n("div",{staticClass:"flex-wrapper"},t._l(t.searchResult,(function(e){return n("div",{key:e.key},[n("div",{staticClass:"emoji",class:{selected:t.isSelected(e.key)},attrs:{title:e.key},domProps:{textContent:t._s(e.emoji)},on:{click:function(n){return t.toggleEmoji(e.key)}}})])})),0)]):n("div",{staticClass:"emoji-list"},[n("div",{staticClass:"flex-wrapper"},t._l(t.emojis.emoji,(function(e,i){return n("div",{key:i,staticClass:"emoji",class:{selected:t.isSelected(i)},attrs:{title:i},domProps:{textContent:t._s(e)},on:{click:function(e){return t.toggleEmoji(i)},contextmenu:function(e){return e.preventDefault(),t.toggleFavorite(i)}}})})),0)])])])},V=[],I=(n("7db0"),n("841c"),n("b90b")),R=n.n(I),B=new i["default"],H=[{name:"Add child",action:"tree-add-child",hotkey:"tab",options:{prevent:!0}},{name:"Add sibling",action:"tree-add-sibling",hotkey:"enter"},{name:"Collapse last node",action:"tree-node-collapse",hotkey:"c"},{name:"Edit last node",action:"tree-node-edit",hotkey:"e"},{name:"Delete last node",action:"tree-delete-last-node",hotkey:["d","delete","backspace"]},{name:"Cursor up",action:"tree-go-up",hotkey:"arrowup"},{name:"Cursor right",action:"tree-go-right",hotkey:"arrowright"},{name:"Cursor down",action:"tree-go-down",hotkey:"arrowdown"},{name:"Cursor left",action:"tree-go-left",hotkey:"arrowleft"},{name:"Save document",action:"document-save",hotkey:"ctrl+s",options:{prevent:!0}}],q={};function F(){window.addEventListener("keydown",U),window.addEventListener("unload",Y);var t,e=Object(_["a"])(H);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hotkey instanceof Array||(n.hotkey=[n.hotkey]);var i,o=Object(_["a"])(n.hotkey);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.toLowerCase();q[s]?console.error("Multiple hotkeys binding on single action: ".concat(n.action)):q[s]=n}}catch(r){o.e(r)}finally{o.f()}}}catch(r){e.e(r)}finally{e.f()}}function U(t){var e=Q(t),n=q[e];function i(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{prevent:!1};i.prevent&&t.preventDefault(),B.$emit(e,n)}n&&i(n.action,t,n.options)}function Q(t){var e=[];return t.ctrlKey&&"Control"!==t.key&&e.push("ctrl"),t.altKey&&"Alt"!==t.key&&e.push("alt"),t.shiftKey&&"Shift"!==t.key&&e.push("shift"),e.push(t.key.toLowerCase()),e.join("+")}function Y(){window.removeEventListener("keydown",U),window.removeEventListener("unload",Y)}var X={name:"EmojiBar",data:function(){return{emojis:R.a,tree:x,searchInput:"",shown:!1,favoritesRaw:w.state.favoriteEmojis||[]}},computed:{favorites:function(){return this.favoritesRaw.map((function(t){return R.a.find(t)}))},currentNodeEmoji:function(){var t,e;return(null===(t=this.tree.lastNode)||void 0===t||null===(e=t.emoji)||void 0===e?void 0:e.map((function(t){return R.a.find(t)})))||[]},searchResult:function(){return R.a.search(this.searchInput)}},methods:{toggleEmoji:function(t){t&&B.$emit("tree-node-toggle-emoji",t)},toggleFavorite:function(t){t&&(this.favorites.some((function(e){return e.key===t}))?this.removeFavorite(t):this.addFavorite(t))},addFavorite:function(t){t&&w.commit("addFavoriteEmoji",t)},removeFavorite:function(t){t&&w.commit("removeFavoriteEmoji",t)},isSelected:function(t){if(t)return this.currentNodeEmoji.some((function(e){return e.key===t}))},toggle:function(){this.shown?this.close():this.open()},close:function(){this.shown=!1},open:function(){this.shown=!0}}},W=X,J=(n("d3d5"),Object(L["a"])(W,$,V,!1,null,null,null)),K=J.exports,Z={name:"Toolbar",components:{DocumentsList:E,Breadcrumb:T,EmojiBar:K},data:function(){return{tree:x,events:H}},methods:{toggleEmojiBar:function(){var t,e;null===(t=this.$refs)||void 0===t||null===(e=t.emojiBar)||void 0===e||e.toggle()}}},G=Z,tt=(n("2277"),Object(L["a"])(G,c,u,!1,null,"a28e3e58",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.shown,expression:"shown"},{name:"on-clickaway",rawName:"v-on-clickaway:mousedown",value:t.close,expression:"close",arg:"mousedown"}],ref:"contextMenu",staticClass:"context-menu",style:t.style,attrs:{tabindex:"0"},on:{click:function(e){return t.close()}}},[t._t("items")],2)},it=[],ot={mixins:[C["mixin"]],computed:{style:function(){return{top:"".concat(this.top,"px"),left:"".concat(this.left,"px")}}},data:function(){return{top:0,left:0,shown:!1}},methods:{open:function(t){var e,n,i,o,a=this;if(t){var s=t.pageY||t.clientY,r=t.pageX||t.clientX,l=(null===(e=this.$refs)||void 0===e||null===(n=e.contextMenu)||void 0===n?void 0:n.clientHeight)||170,d=(null===(i=this.$refs)||void 0===i||null===(o=i.contextMenu)||void 0===o?void 0:o.clientWidth)||0,c=s,u=c+l,h=r,f=h+d;Math.max(u,window.innerHeight)===u&&(c-=l),Math.max(f,.5*window.innerWidth)===f&&(h-=d),this.top=c,this.left=h,this.$nextTick((function(){return a.$el.focus()})),this.shown=!0}},close:function(){this.shown&&(this.shown=!1,this.$emit("close-event"),this.left=0,this.top=0)}}},at=ot,st=(n("9593"),Object(L["a"])(at,nt,it,!1,null,"1af9cec5",null)),rt=st.exports,lt=n("5698"),dt=/translate\((-?\d+)px, ?(-?\d+)px\)/i,ct=/scale\((\S*)\)/i,ut={CURVE:"curve",STRAIGHT:"straight"},ht=200,ft=100,vt=200,gt=0;function mt(){for(var t=[],e="0123456789abcdef",n=0;n<36;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}function pt(t){var e=t.x,n=t.y;return{x:n,y:e}}var wt={name:"Tree",props:{config:{type:Object,default:function(){return{nodeWidth:ht,nodeHeight:ft,levelHeight:vt}}},linkStyle:{type:String,default:ut.CURVE}},components:{Toolbar:et,ContextMenu:rt},data:function(){return{d3:lt,events:H,store:w,tree:x,dataset:x,colors:"568FE1",nodeDataList:[],linkDataList:[],initTransformX:0,initTransformY:0,currentScale:1,nodeDrag:{dragging:!1,source:null,target:null,snap:""},key:0}},computed:{initialTransformStyle:function(){return{transform:"scale(1) translate(".concat(this.initTransformX,"px, ").concat(this.initTransformY,"px)"),transformOrigin:"center"}}},created:function(){var t=this;this.addUniqueKey(this.dataset),window.addEventListener("unload",this.beforeUnload),B.$on("tree-push-root",this.pushRootToQuery),B.$on("tree-pop-root",this.spliceRootsQuery),B.$on("tree-add-sibling",this.addSibling),B.$on("tree-add-child",this.addChild),B.$on("tree-set-last-node",(function(e){e&&e[0]&&t.setLastNode(e[0])})),B.$on("tree-node-toggle-emoji",this.toggleEmoji),B.$on("tree-node-collapse",this.collapseLastNode),B.$on("tree-node-edit",(function(e){return t.editLastNode(e)})),B.$on("tree-delete-last-node",this.deleteLastNode),B.$on("tree-go-up",this.goUp),B.$on("tree-go-down",this.goDown),B.$on("tree-go-left",this.goLeft),B.$on("tree-go-right",this.goRight),B.$on("document-save",this.saveDocument)},mounted:function(){this.init()},methods:{isDraggedOver:function(t){var e,n,i,o;return(null===(e=this.nodeDrag)||void 0===e||null===(n=e.target)||void 0===n?void 0:n.data._gid)===t._gid&&(null===(i=this.nodeDrag)||void 0===i||null===(o=i.source)||void 0===o?void 0:o.data._gid)!==t._gid&&!t.isRoot},startDrag:function(t,e){t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",e.data.collapsed=!0,this.nodeDrag.source=e},onDrag:function(){this.nodeDrag.dragging=!0},onDrop:function(t,e){this.nodeDrag.target&&this.nodeDrag.target!==e?(x.cloneNode(e.data,this.nodeDrag.target.data,this.nodeDrag.snap),e.collapsed=!1,this.nodeDrag.dragging=!1,this.nodeDrag.target=null):this.nodeDrag.dragging=!1},mouseOverNode:function(t,e){if(this.nodeDrag.dragging&&!e.isRoot){this.nodeDrag.target=e;var n=t.target.getBoundingClientRect(),i=t.clientX-n.left,o=t.clientY-n.top,a=n.height/2;i>n.width-n.width/4?this.nodeDrag.snap="right":o<a?this.nodeDrag.snap="top":o>=a&&(this.nodeDrag.snap="bottom")}},mouseLeaveNode:function(t,e){var n,i;e.data._gid===(null===(n=this.nodeDrag)||void 0===n||null===(i=n.target)||void 0===i?void 0:i.data._gid)&&(this.nodeDrag.target=null)},beforeUnload:function(){this.saveDocument(),window.removeEventListener("unload",this.beforeUnload)},spliceRootsQuery:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;x.spliceRootsQuery(t)},pushRootToQuery:function(){x.lastNode&&x.lastNode.getChildren().length&&x.pushRootToQuery(x.lastNode)},sortTree:function(t,e){x.sortLastNode(t,e)},addSibling:function(){x.addSibling(),this.focusInput("node-#".concat(x.lastNode._gid)),this.saveDocument()},addChild:function(){x.addChild(),this.focusInput("node-#".concat(x.lastNode._gid)),this.saveDocument()},toggleEmoji:function(t){x.lastNode.toggleEmoji(t)},emojifyArray:function(t){return null!==t&&void 0!==t&&t.length?t.map((function(t){return R.a.get(t)})):""},setLastNode:function(t,e){var n,i;if(1===(null===e||void 0===e?void 0:e.which)&&x.lastNode._gid===t._gid)return this.collapseLastNode();x.lastNode=t,null===(n=this.$refs)||void 0===n||null===(i=n.contextMenu)||void 0===i||i.close()},editLastNode:function(t){x.lastNode.editing||null===t||void 0===t||t.preventDefault(),x.editLastNode(),this.focusInput("node-#".concat(x.lastNode._gid)),this.saveDocument()},blurLastNode:function(t){x.blurLastNode(t)},collapseLastNode:function(){x.collapseLastNode()},deleteLastNode:function(){x.deleteLastNode(),this.saveDocument()},cancelNodeEdit:function(){x.lastNode.firstEdit?x.deleteLastNode({force:!0}):x.lastNode.editing=!1},goUp:function(){x.goUp()},goDown:function(){x.goDown()},goLeft:function(){x.goLeft()},goRight:function(){x.goRight()},clickedText:function(t){this.setLastNode(t.data)},clickedNode:function(t){this.setLastNode(t),x.collapseLastNode()},focusInput:function(t){var e=this;t&&this.$nextTick((function(){var n=e.$refs[t];n&&n[0]&&n[0].focus()}))},saveDocument:function(){w.commit("saveDocument",x.exportToStore())},handleZoom:function(t){if(2===t.which)return this.restoreScale();t.which||(((t.deltaY||-t.wheelDelta||t.detail)>>10||1)<0?this.zoomIn():this.zoomOut())},init:function(){this.draw(),this.enableDrag(),this.initTransform()},zoomIn:function(){var t,e,n=null===(t=this.$refs.domContainer)||void 0===t||null===(e=t.style)||void 0===e?void 0:e.transform;if(n){var i=1.2,o=n.match(ct);if(o&&o.length>0){var a=parseFloat(o[1]);i*=a}this.setScale(i)}},zoomOut:function(){var t,e,n=null===(t=this.$refs.domContainer)||void 0===t||null===(e=t.style)||void 0===e?void 0:e.transform;if(n){var i=1/1.2,o=n.match(ct);if(o&&o.length>0){var a=parseFloat(o[1]);i=a/1.2}this.setScale(i)}},restoreScale:function(){this.setScale(1)},setScale:function(t){var e,n;if("number"===typeof t){var i=this.getTranslate();if(i){var o="translate(".concat(i[0],"px, ").concat(i[1],"px)");null!==(e=this.$refs.domContainer)&&void 0!==e&&null!==(n=e.style)&&void 0!==n&&n.transform&&(this.$refs.svg.style.transform="scale(".concat(t,") ")+o,this.$refs.domContainer.style.transform="scale(".concat(t,") ")+o,this.currentScale=t)}}},getTranslate:function(){var t,e=null===(t=this.$refs.svg)||void 0===t?void 0:t.style.transform;if(e){var n=e.match(dt);if(null===n)return[null,null];var i=parseInt(n[1]),o=parseInt(n[2]);return[i,o]}},addUniqueKey:function(t){var e=[t];while(0!==e.length){var n=e.pop();n._key=mt(),n.children&&e.push.apply(e,Object(d["a"])(n.children))}return t},initTransform:function(){var t=this.$refs.container.offsetHeight;this.initTransformX=Math.floor(this.config.nodeWidth),this.initTransformY=Math.floor(t/2)},generateLinkPath:function(t){if(this.linkStyle===ut.CURVE){var e=lt["linkHorizontal"]();return e.x((function(t){return t.x})).y((function(t){return t.y})).source((function(t){var e={x:t.source.x,y:t.source.y};return pt(e)})).target((function(t){var e={x:t.target.x,y:t.target.y};return pt(e)})),e(t)}if(this.linkStyle===ut.STRAIGHT){var n=lt["path"](),i={x:t.source.x,y:t.source.y},o={x:t.target.x,y:t.target.y};i=pt(i),o=pt(o);var a=o.x-i.x,s={x:i.x+a/2,y:i.y},r={x:i.x+a/2,y:o.y};return n.moveTo(i.x,i.y),n.lineTo(s.x,s.y),n.lineTo(r.x,r.y),n.lineTo(o.x,o.y),n.toString()}},draw:function(){var t=this.buildTree(this.dataset),e=Object(l["a"])(t,2),n=e[0],i=e[1];this.linkDataList=i,this.svg=this.d3.select(this.$refs.svg);var o=this,a=this.svg.selectAll(".link").data(i,(function(t){return"".concat(t.source.data._key,"-").concat(t.target.data._key)}));a.enter().append("path").attr("class","link").attr("d",(function(t){return o.generateLinkPath(t)})),a.transition().duration(gt).ease(lt["easeCubicInOut"]).attr("d",(function(t){return o.generateLinkPath(t)})),a.exit().transition().duration(gt/2).ease(lt["easeCubicInOut"]).style("opacity",0).remove(),this.nodeDataList=n},buildTree:function(t){var e=this.d3.tree().nodeSize([this.config.nodeWidth,this.config.levelHeight]),n=e(this.d3.hierarchy(t));return[n.descendants(),n.links()]},enableDrag:function(){var t=this,e=this.$refs.svg,n=this.$refs.container,i=0,o=0,a=!1,s="";n.onmousedown=function(t){s=e.style.transform,i=t.clientX,o=t.clientY,a=!0},n.onmousemove=function(n){if(a){var r=s,d=0,c=0;if(r){var u=r.match(dt);if(null!==u&&0!==u.length){var h=u.slice(1),f=Object(l["a"])(h,2),v=f[0],g=f[1];d=parseInt(v),c=parseInt(g)}}var m=Math.floor((n.clientX-i)/t.currentScale)+d,p=Math.floor((n.clientY-o)/t.currentScale)+c,w="translate(".concat(m,"px, ").concat(p,"px)");r&&(w=r.replace(dt,w)),e.style.transform=w,t.$refs.domContainer.style.transform=w}},n.onmouseup=function(){i=0,o=0,a=!1}},formatDimension:function(t){return"number"===typeof t?"".concat(t,"px"):-1!==t.indexOf("px")?t:"".concat(t,"px")},parseDimensionNumber:function(t){return"number"===typeof t?t:parseInt(t.replace("px",""))},nodeContextClick:function(t,e){var n;t.preventDefault(),this.setLastNode(e),null===(n=this.$refs.contextMenu)||void 0===n||n.open(t)}},watch:{dataset:{deep:!0,immediate:!0,handler:function(){this.draw()}}}},yt=wt,_t=(n("82f5"),n("31f4"),n("ceee"),Object(L["a"])(yt,s,r,!1,null,"11c9252d",null)),Nt=_t.exports,bt={name:"App",components:{Tree:Nt}},kt=bt,xt=(n("034f"),Object(L["a"])(kt,o,a,!1,null,null,null)),Ct=xt.exports,Dt=n("1881"),jt=n.n(Dt);F(),i["default"].use(jt.a,{componentName:"Modal"}),i["default"].config.productionTip=!1,new i["default"]({render:function(t){return t(Ct)}}).$mount("#app")},"82f5":function(t,e,n){"use strict";n("8f37")},"85ec":function(t,e,n){},8748:function(t,e,n){},"8f37":function(t,e,n){},9593:function(t,e,n){"use strict";n("aa6f")},"9ea7":function(t,e,n){},aa6f:function(t,e,n){},ceee:function(t,e,n){"use strict";n("fa6e")},d3d5:function(t,e,n){"use strict";n("e01c")},e01c:function(t,e,n){},f21b:function(t,e,n){},fa6e:function(t,e,n){},ff3f:function(t,e,n){"use strict";n("9ea7")}});
//# sourceMappingURL=app.ec4ebbb5.js.map