{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/components/Toolbar.vue?1c2a","webpack:///./src/components/DocumentsList.vue?fe84","webpack:///./src/components/Breadcrumb.vue?4e7a","webpack:///./src/components/Tree.vue?494f","webpack:///./src/App.vue?05bb","webpack:///./src/components/Tree.vue?8392","webpack:///./src/components/Toolbar.vue?866d","webpack:///./src/components/DocumentsList.vue?3cff","webpack:///./src/store.js","webpack:///./src/node.js","webpack:///./src/tree.js","webpack:///./src/components/ExportJSON.vue?a778","webpack:///src/components/ExportJSON.vue","webpack:///./src/components/ExportJSON.vue?bea1","webpack:///./src/components/ExportJSON.vue","webpack:///src/components/DocumentsList.vue","webpack:///./src/components/DocumentsList.vue?b483","webpack:///./src/components/DocumentsList.vue","webpack:///./src/components/Breadcrumb.vue?3de5","webpack:///src/components/Breadcrumb.vue","webpack:///./src/components/Breadcrumb.vue?fd89","webpack:///./src/components/Breadcrumb.vue","webpack:///./src/components/EmojiBar.vue?d658","webpack:///./src/hotkeys.js","webpack:///src/components/EmojiBar.vue","webpack:///./src/components/EmojiBar.vue?801b","webpack:///./src/components/EmojiBar.vue","webpack:///src/components/Toolbar.vue","webpack:///./src/components/Toolbar.vue?2909","webpack:///./src/components/Toolbar.vue","webpack:///./src/components/ContextMenu.vue?ffb3","webpack:///src/components/ContextMenu.vue","webpack:///./src/components/ContextMenu.vue?ef87","webpack:///./src/components/ContextMenu.vue","webpack:///src/components/Tree.vue","webpack:///./src/components/Tree.vue?cb80","webpack:///./src/components/Tree.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js","webpack:///./src/components/ContextMenu.vue?8385","webpack:///./src/components/Tree.vue?a3aa","webpack:///./src/components/EmojiBar.vue?7c29","webpack:///./src/components/ExportJSON.vue?39cf","webpack:///./src/components/Toolbar.vue?888a","webpack:///./src/components/Tree.vue?c43e"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","tree","_e","staticRenderFns","staticClass","ref","scopedSlots","_u","fn","on","addSibling","_v","addChild","toggleDone","lastNode","done","_s","_children","isRoot","pushRootToQuery","collapseLastNode","collapsed","editLastNode","_l","$event","toggleSetting","deleteLastNode","proxy","class","dragging","nodeDrag","handleZoom","button","style","node","_key","left","formatDimension","y","top","x","width","config","nodeWidth","height","nodeHeight","stopPropagation","mouseOverNode","onDrop","snap","isDraggedOver","dragover","highlighted","_gid","stack","childrenLength","nodeMaxWidth","nodeMaxHeight","draggable","setLastNode","nodeContextClick","startDrag","onDrag","editing","emoji","emojifyArray","domProps","hasQuery","spliceRootsQuery","directives","rawName","expression","refInFor","type","indexOf","_k","keyCode","cancelNodeEdit","blurLastNode","target","composing","$set","shouldDisplayProgress","progress","e","index","title","hotkey","join","action","condSatisfied","emitEvent","event","icon","toggleDocMenu","toggleEmojiBar","$modal","show","beforeClose","currTab","switchTab","createNewDocument","exportJSON","doc","uuid","active","activeDoc","setDocument","editingDoc","timeAgo","lastEdit","enterDocEdit","deleteDocument","saveDocName","leaveDocEdit","newDocName","Vue","use","Vuex","Document","Date","now","store","Store","state","favoriteEmojis","settings","lastDocument","documents","plugins","createPersistedState","mutations","addFavoriteEmoji","removeFavoriteEmoji","updateDocument","assign","addDocument","document","actions","getTreeData","dispatch","commit","saveDocument","getters","lastDocExists","createDocument","uuidv4","delete","keys","treeData","replace","crypto","getRandomValues","Uint8Array","toString","NodeDefaultSettings","displayProgress","deepProgress","Node","globalID","id","parentNode","depth","override","firstEdit","children","_id","_name","_parentNode","_collapsed","_depth","_editing","_firstEdit","_emoji","_done","size","_settings","includes","forEach","undefined","setSetting","shallowProgress","percentage","sum","totalNodes","cSum","cTN","toFixed","Tree","_gidCounter","_root","_query","loaded","then","parseTreeData","_lastNode","trim","createNode","lastNodeID","lastNodeParent","pushNode","destination","parent","counter","options","force","newLast","triggerNode","closestTopNode","closestBottomNode","Math","floor","position","self","deepClone","newNode","getChildren","map","addChildAtIndex","parse","child","JSON","stringify","entries","k","v","parseChildren","spliceAmount","newRoot","pop","by","direction","console","log","sort","a","b","error","$emit","exportToStore","created","text","anchor","download","href","webkitURL","URL","createObjectURL","blob","dataset","downloadurl","click","component","components","computed","methods","setDocumentAction","createDocumentAction","$nextTick","deleteDocumentAction","q","popStack","queryLen","query","amount","searchInput","close","favorites","selected","isSelected","toggleEmoji","preventDefault","toggleFavorite","currentNodeEmoji","emojis","eventBus","events","prevent","UIIgnore","eventsMap","Init","addEventListener","keydown","unload","Array","toLowerCase","getCombination","match","eventName","combination","ctrlKey","altKey","shiftKey","removeEventListener","shown","favoritesRaw","searchResult","some","addFavorite","removeFavorite","toggle","open","DocumentsList","Breadcrumb","EmojiBar","cond","arg","_t","mixins","max","menuBottom","innerHeight","newY","menuHeight","menuRight","innerWidth","newX","menuWidth","CURVE","STRAIGHT","hexDigits","substr","random","rotatePoint","props","default","DEFAULT_NODE_WIDTH","DEFAULT_NODE_HEIGHT","levelHeight","DEFAULT_LEVEL_HEIGHT","linkStyle","String","LinkStyle","d3","colors","nodeDataList","linkDataList","initTransformX","initTransformY","currentScale","source","initialTransformStyle","transform","transformOrigin","addUniqueKey","root","beforeUnload","$on","args","doAllChildren","undoAllChildren","goUp","goDown","goLeft","goRight","mounted","init","evt","dataTransfer","dropEffect","effectAllowed","rect","mouseLeaveNode","sortTree","sortLastNode","focusInput","toggleDoneState","setAllChildrenDoneState","array","clickedText","clickedNode","input","focus","saveDocumentAction","which","restoreScale","deltaY","wheelDelta","detail","draw","enableDrag","initTransform","zoomIn","originTransformStr","scaleMatchResult","targetScale","originScale","setScale","zoomOut","scaleNum","pos","$refs","svg","domContainer","getTranslate","string","queue","rootNode","containerHeight","generateLinkPath","linkPath","sourcePoint","targetPoint","xOffset","select","links","buildTree","layout","descendants","container","onmousedown","mouseDownTransform","svgElement","startX","clientX","startY","clientY","isDrag","onmousemove","originTransform","originOffsetX","parseInt","offsetX","originOffsetY","offsetY","transformStr","onmouseleave","onmouseup","dimension","parseDimensionNumber","watch","deep","immediate","handler","VModal","componentName","BootstrapVueIcons","ModalPlugin","productionTip","render","h","App","$mount"],"mappings":"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","file":"js/app.daa503b0.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/node-tree-editor/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=style&index=1&id=a6551280&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocumentsList.vue?vue&type=style&index=0&id=7350f5ce&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Breadcrumb.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tree.vue?vue&type=style&index=1&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(_vm.tree.loaded)?_c('tree'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('context-menu',{ref:\"contextMenu\",scopedSlots:_vm._u([{key:\"items\",fn:function(){return [_c('button',{staticClass:\"context-menu-item\",on:{\"click\":_vm.addSibling}},[_c('b-icon',{attrs:{\"icon\":\"node-plus\"}}),_vm._v(\" Add sibling \")],1),_c('button',{staticClass:\"context-menu-item\",on:{\"click\":_vm.addChild}},[_c('b-icon',{attrs:{\"icon\":\"diagram2\"}}),_vm._v(\" Add child \")],1),_c('button',{staticClass:\"context-menu-item\",on:{\"click\":_vm.toggleDone}},[_c('b-icon',{attrs:{\"icon\":_vm.tree.lastNode.done ? 'x' : 'check2'}}),_vm._v(\" \"+_vm._s(_vm.tree.lastNode.done ? \"Undo\" : \"Done\")+\" \")],1),(_vm.tree.lastNode._children.length && !_vm.tree.lastNode.isRoot)?_c('button',{staticClass:\"context-menu-item\",on:{\"click\":_vm.pushRootToQuery}},[_c('b-icon',{attrs:{\"icon\":\"arrow-bar-down\"}}),_vm._v(\" Drill down \")],1):_vm._e(),(_vm.tree.lastNode.childrenLength)?_c('button',{staticClass:\"context-menu-item\",on:{\"click\":_vm.collapseLastNode}},[_c('b-icon',{attrs:{\"icon\":_vm.tree.lastNode.collapsed ? 'arrows-expand' : 'arrows-collapse'}}),_vm._v(\" \"+_vm._s(_vm.tree.lastNode.collapsed ? \"Expand\" : \"Collapse\")+\" \")],1):_vm._e(),_c('button',{staticClass:\"context-menu-item\",on:{\"click\":_vm.editLastNode}},[_c('b-icon',{attrs:{\"icon\":\"pencil\"}}),_vm._v(\" Edit \")],1),_c('button',{staticClass:\"context-menu-selector\"},[_c('b-icon',{attrs:{\"icon\":\"gear\"}}),_vm._v(\" Settings \"),_c('ul',_vm._l((_vm.tree.lastNode.settings),function(value,key){return _c('li',{key:key,on:{\"click\":function($event){return _vm.tree.lastNode.toggleSetting(key)}}},[_vm._v(\" \"+_vm._s(key)+\" \"),(value)?_c('b-icon',{attrs:{\"icon\":\"check2\"}}):_vm._e()],1)}),0),_c('b-icon',{staticClass:\"arrow\",attrs:{\"icon\":\"chevron-right\"}})],1),(_vm.tree.lastNode.deletable)?_c('button',{staticClass:\"context-menu-item\",on:{\"click\":_vm.deleteLastNode}},[_c('b-icon',{attrs:{\"icon\":\"node-minus\"}}),_vm._v(\" Delete \")],1):_vm._e()]},proxy:true}])}),_c('toolbar'),_c('div',{ref:\"container\",staticClass:\"tree-container\",class:{ dragging: _vm.nodeDrag.dragging },on:{\"mousewheel\":_vm.handleZoom,\"mouseup\":function($event){if('button' in $event && $event.button !== 1){ return null; }return _vm.handleZoom($event)}}},[_c('svg',{ref:\"svg\",staticClass:\"svg vue-tree\",style:(_vm.initialTransformStyle)}),_c('div',{ref:\"domContainer\",staticClass:\"dom-container\",style:(_vm.initialTransformStyle)},_vm._l((_vm.nodeDataList),function(node){return _c('div',{key:node.data._key,staticClass:\"node-slot\",style:({\n          left: _vm.formatDimension(node.y),\n          top: _vm.formatDimension(node.x),\n          width: _vm.formatDimension(_vm.config.nodeWidth),\n          height: _vm.formatDimension(_vm.config.nodeHeight),\n        }),on:{\"dragover\":function($event){$event.stopPropagation();return _vm.mouseOverNode($event, node)},\"dragend\":function($event){return _vm.onDrop($event, node)}}},[_c('div',{staticClass:\"node-slot-overlay\",class:{\n            'node-top': _vm.nodeDrag.snap === 'top' && _vm.isDraggedOver(node.data),\n            'node-bottom':\n              _vm.nodeDrag.snap === 'bottom' && _vm.isDraggedOver(node.data),\n            'node-right':\n              _vm.nodeDrag.snap === 'right' && _vm.isDraggedOver(node.data),\n          }},[_c('div',{staticClass:\"node\",class:{\n              dragover: _vm.isDraggedOver(node.data),\n\n              highlighted: node.data._gid === _vm.tree.lastNode._gid,\n              stack: node.data.childrenLength && node.data.collapsed,\n              done: node.data.done,\n            },style:({\n              'max-width': _vm.formatDimension(_vm.config.nodeMaxWidth),\n              'max-height': _vm.formatDimension(_vm.config.nodeMaxHeight),\n            }),attrs:{\"draggable\":node.data.draggable},on:{\"mousedown\":function($event){$event.stopPropagation();},\"click\":function($event){return _vm.setLastNode(node.data, $event)},\"contextmenu\":function($event){return _vm.nodeContextClick($event, node.data)},\"dragstart\":function($event){return _vm.startDrag($event, node)},\"drag\":function($event){return _vm.onDrag()}}},[(!node.data.editing)?_c('div',{staticClass:\"content\"},[(\n                  !node.data.editing &&\n                  node.data.emoji &&\n                  node.data.emoji.length\n                )?_c('div',_vm._l((_vm.emojifyArray(node.data.emoji)),function(emoji,key){return _c('span',{key:key},[_vm._v(_vm._s(emoji)+\" \")])}),0):_vm._e(),(!node.data.editing)?_c('pre',{domProps:{\"textContent\":_vm._s(node.data.name)},on:{\"mousewheel\":function($event){$event.stopPropagation();}}}):_vm._e(),(node.data.isRoot && _vm.tree.hasQuery)?_c('button',{staticClass:\"drill-up\",on:{\"click\":function($event){$event.stopPropagation();return _vm.spliceRootsQuery($event)}}},[_c('b-icon',{attrs:{\"icon\":\"arrow-bar-up\"}})],1):_vm._e()]):_vm._e(),(node.data.editing)?_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(node.data._name),expression:\"node.data._name\"}],ref:(\"node-#\" + (node.data._gid)),refInFor:true,domProps:{\"value\":(node.data._name)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.cancelNodeEdit($event)},\"blur\":function($event){return _vm.blurLastNode(node.data)},\"mousewheel\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(node.data, \"_name\", $event.target.value)}}}):_vm._e(),_c('div',{staticClass:\"controls\"},[_c('button',{staticClass:\"add-child\",on:{\"click\":function($event){$event.stopPropagation();return _vm.addSibling()}}},[_c('b-icon',{attrs:{\"icon\":\"node-plus\"}})],1),_c('button',{staticClass:\"add-sibling\",on:{\"click\":function($event){return _vm.addChild()}}},[_c('b-icon',{attrs:{\"icon\":\"diagram2\"}})],1)]),(_vm.shouldDisplayProgress(node.data))?_c('div',{staticClass:\"progress\",class:{ 'round-right': node.data.progress == 100 },style:({ width: ((node.data.progress) + \"%\") }),attrs:{\"title\":((node.data.progress) + \"%\")}}):_vm._e()])])])}),0)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('modal',{attrs:{\"name\":\"info-modal\",\"adaptive\":true,\"height\":\"auto\",\"width\":\"500px\"}},[_c('div',{attrs:{\"id\":\"modal\"}},[_c('table',{staticClass:\"info-table\"},_vm._l((_vm.events),function(e,index){return _c('tr',{key:index,staticClass:\"info-row\"},[_c('td',{staticClass:\"info-col-action\"},[_vm._v(\" \"+_vm._s(e.title)+\" \")]),_c('td',{staticClass:\"info-col-hotkey\"},[_vm._v(\" \"+_vm._s(e.hotkey.join(\" / \"))+\" \")])])}),0)])]),_c('breadcrumb'),_c('documents-list'),_c('div',{staticClass:\"toolbar\"},[_c('div',{staticClass:\"left-buttons\"},_vm._l((_vm.actions),function(action,index){return _c('div',{key:index,attrs:{\"title\":action.title}},[(_vm.condSatisfied(action))?_c('button',{on:{\"click\":function($event){$event.stopPropagation();return _vm.emitEvent(action.event)}}},[_c('b-icon',{attrs:{\"icon\":action.icon}})],1):_vm._e()])}),0),_c('div',{staticClass:\"right-buttons\"},[_c('button',{on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleDocMenu($event)}}},[_c('b-icon',{attrs:{\"icon\":\"file-earmark-text\"}})],1),_c('button',{on:{\"click\":_vm.toggleEmojiBar}},[_c('b-icon',{attrs:{\"icon\":\"emoji-smile\"}})],1),_c('button',{on:{\"click\":function($event){return _vm.$modal.show('info-modal')}}},[_c('b-icon',{attrs:{\"icon\":\"question\"}})],1)])]),_c('emoji-bar',{ref:\"emojiBar\",staticClass:\"emoji-bar\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"name\":\"docs-modal\",\"adaptive\":true,\"height\":\"auto\",\"width\":\"30%\"},on:{\"before-close\":_vm.beforeClose}},[(_vm.currTab === 'export')?_c('export-JSON',{on:{\"return\":function($event){return _vm.switchTab('docs')}}}):(_vm.currTab === 'import')?_c('div',[_vm._v(\"import\")]):_c('div',{staticClass:\"doc-menu\"},[_c('div',{staticClass:\"buttons\"},[_c('button',{staticClass:\"doc-new\",on:{\"click\":_vm.createNewDocument}},[_c('b-icon',{attrs:{\"icon\":\"file-earmark-plus\"}})],1),_c('div',{staticClass:\"import-export\"},[_c('button',{staticClass:\"doc-export\",on:{\"click\":_vm.exportJSON}},[_c('b-icon',{attrs:{\"icon\":\"upload\"}})],1)])]),_c('div',{staticClass:\"doc-list\"},_vm._l((_vm.documents),function(doc,uuid){return _c('div',{key:uuid,staticClass:\"doc\",class:{ active: _vm.activeDoc(uuid) },on:{\"click\":function($event){return _vm.setDocument(uuid)}}},[(uuid !== _vm.editingDoc)?_c('div',{staticClass:\"content\"},[_c('span',{staticClass:\"doc-name\"},[_vm._v(_vm._s(doc.name))]),_c('span',[(doc.lastEdit)?_c('span',{staticClass:\"doc-date\"},[_vm._v(_vm._s(_vm.timeAgo(doc.lastEdit)))]):_vm._e(),_c('button',{on:{\"click\":function($event){$event.stopPropagation();return _vm.enterDocEdit(doc, uuid)}}},[_c('b-icon',{attrs:{\"icon\":\"pencil-square\"}})],1),_c('button',{on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteDocument(uuid)}}},[_c('b-icon',{attrs:{\"icon\":\"trash\"}})],1)])]):_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"name-input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newDocName),expression:\"newDocName\"}],ref:\"docNameInput\",refInFor:true,attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.newDocName)},on:{\"click\":function($event){$event.stopPropagation();},\"keydown\":[function($event){$event.stopPropagation();},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.saveDocName(doc)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.leaveDocEdit()}],\"mousewheel\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.newDocName=$event.target.value}}})]),_c('div',[_c('button',{on:{\"click\":function($event){return _vm.leaveDocEdit(doc)}}},[_c('b-icon',{attrs:{\"icon\":\"x\"}})],1),_c('button',{on:{\"click\":function($event){return _vm.saveDocName(doc)}}},[_c('b-icon',{attrs:{\"icon\":\"check2\"}})],1)])])])}),0)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport createPersistedState from \"vuex-persistedstate\";\n\nVue.use(Vuex);\n\nclass Document {\n  constructor(name, data) {\n    this.name = name;\n    this.data = data;\n    this.lastEdit = Date.now();\n  }\n}\n\nexport const store = new Vuex.Store({\n  state: {\n    favoriteEmojis: [],\n    settings: {\n      lastDocument: \"\",\n    },\n    documents: {},\n  },\n  plugins: [createPersistedState()],\n  mutations: {\n    addFavoriteEmoji: function (state, emoji) {\n      return state.favoriteEmojis.push(emoji);\n    },\n    removeFavoriteEmoji: function (state, emoji) {\n      return state.favoriteEmojis.splice(\n        state.favoriteEmojis.indexOf(emoji),\n        1\n      );\n    },\n\n    setDocument: function (state, uuid) {\n      if (uuid) state.settings.lastDocument = uuid;\n    },\n    updateDocument: (state, { uuid, data }) => {\n      Object.assign(state.documents[uuid], data);\n    },\n    addDocument: (state, { uuid, document }) => {\n      state.documents[uuid] = document;\n    },\n  },\n  actions: {\n    getTreeData: ({ state, dispatch }) => {\n      if (\n        !state.settings.lastDocument ||\n        !state.documents[state.settings.lastDocument]\n      ) {\n        return dispatch(\"createDocument\");\n      }\n      return state.documents[state.settings.lastDocument].data;\n    },\n    setDocument: ({ commit, state }, uuid) => {\n      if (uuid) commit(\"setDocument\", uuid);\n      return state.documents[uuid].data;\n    },\n    saveDocument: ({ commit, state, getters }, data) => {\n      if (!getters.lastDocExists) return;\n      commit(\"updateDocument\", {\n        uuid: state.settings.lastDocument,\n        data: { lastEdit: Date.now(), data: data },\n      });\n    },\n    createDocument: (\n      { commit, state },\n      data = { name: \"document\", data: {} }\n    ) => {\n      const uuid = uuidv4();\n      commit(\"addDocument\", {\n        uuid: uuid,\n        document: new Document(data.name, data.data),\n      });\n      commit(\"setDocument\", uuid);\n      return state.documents[uuid].data;\n    },\n    deleteDocument: ({ commit, state, dispatch }, uuid) => {\n      Vue.delete(state.documents, uuid);\n      const keys = Object.keys(state.documents);\n      if (!keys.length) {\n        return dispatch(\"createDocument\");\n      } else {\n        commit(\"setDocument\", keys[0]);\n        return state.documents[keys[0]].data;\n      }\n    },\n  },\n  getters: {\n    documents: (state) => state.documents,\n    treeData: function (state) {\n      if (\n        !state.settings.lastDocument ||\n        !state.documents[state.settings.lastDocument]\n      )\n        return {};\n      return state.documents[state.settings.lastDocument].data;\n    },\n    lastDocExists: (state) => !!state.documents[state.settings.lastDocument],\n  },\n});\n\nfunction uuidv4() {\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\n    (\n      c ^\n      (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n    ).toString(16)\n  );\n}\n","export const NodeDefaultSettings = {\n  displayProgress: true,\n  deepProgress: true,\n};\nexport class Node {\n  constructor(\n    globalID = 0,\n    id = 0,\n    parentNode = null,\n    depth = 0,\n    override = {\n      name: \"\",\n      firstEdit: true,\n      collapsed: false,\n      children: [],\n      emoji: [],\n      done: false,\n      isRoot: false,\n      settings: {\n        displayProgress: true,\n        deepProgress: true,\n      },\n    }\n  ) {\n    this._gid = globalID;\n    this._id = id;\n    this._name = override.name;\n    this._parentNode = parentNode;\n    this._children = override.children;\n    this._collapsed = override?.collapsed === true ? true : false;\n    this._depth = depth;\n    this._editing = !override.firstEdit ? false : parentNode !== null;\n    this._firstEdit = override.firstEdit;\n    this._emoji = override.emoji || [];\n    this._done = override.done;\n\n    this.isRoot = override?.isRoot === true ? true : false;\n    this.size = [250, 250];\n    this._settings = {\n      displayProgress:\n        override.settings?.displayProgress === false ? false : true,\n      deepProgress: override.settings?.deepProgress === false ? false : true,\n    };\n  }\n\n  addChild(node) {\n    if (!(node instanceof Node)) return;\n    this._children.push(node);\n  }\n\n  addChildAtIndex(node, index) {\n    if (!(node instanceof Node) || index < 0) return;\n    this._children.splice(index, 0, node);\n  }\n\n  toggleEmoji(emoji) {\n    this._emoji.includes(emoji)\n      ? this._emoji.splice(this._emoji.indexOf(emoji), 1)\n      : this._emoji.push(emoji);\n  }\n\n  toggleDoneState() {\n    this._done = !this._done;\n  }\n\n  getChildren() {\n    return this._children;\n  }\n\n  setAllChildrenDoneState(state) {\n    this._children.forEach((c) => (c.done = state ? true : false));\n  }\n\n  delete() {\n    const index = this._parentNode._children.indexOf(this);\n    this._parentNode.children.splice(index, 1);\n  }\n\n  setSetting(key, value) {\n    if (this._settings[key] === undefined) return;\n    this._settings[key] = value;\n  }\n\n  toggleSetting(key) {\n    if (\n      this._settings[key] === undefined ||\n      typeof this._settings[key] !== \"boolean\"\n    )\n      return;\n    this.setSetting(key, !this._settings[key]);\n  }\n\n  get id() {\n    return this._id;\n  }\n  get parent() {\n    return this._parentNode;\n  }\n  get children() {\n    return this.collapsed ? [] : this._children;\n  }\n\n  get collapsed() {\n    return this._collapsed;\n  }\n\n  get name() {\n    return this._name || `node #${this._gid}`;\n  }\n\n  get editing() {\n    return this._editing;\n  }\n\n  get depth() {\n    return this._depth;\n  }\n\n  get childrenLength() {\n    return this._children.length;\n  }\n\n  get firstEdit() {\n    return this._firstEdit;\n  }\n\n  get emoji() {\n    return this._emoji;\n  }\n\n  get done() {\n    return this._done;\n  }\n\n  get progress() {\n    const { percentage } = this._settings.deepProgress\n      ? this.deepProgress\n      : this.shallowProgress;\n\n    return percentage;\n  }\n\n  get deepProgress() {\n    if (this._children.length) {\n      let sum = 0;\n      let totalNodes = this._children.length;\n      this._children.forEach((c) => {\n        sum += c.done ? 1 : 0;\n        if (c._children.length) {\n          let { sum: cSum, totalNodes: cTN } = c.deepProgress;\n          sum += cSum;\n          totalNodes += cTN;\n        }\n      });\n      return {\n        sum,\n        totalNodes,\n        percentage: ((sum / totalNodes) * 100).toFixed(0),\n      };\n    }\n    return { sum: 0, totalNodes: 0, percentage: 0 };\n  }\n\n  get shallowProgress() {\n    if (this._children.length) {\n      let sum = 0;\n      let totalNodes = this._children.length;\n      this._children.forEach((c) => (sum += c.done ? 1 : 0));\n      return {\n        sum,\n        totalNodes,\n        percentage: ((sum / totalNodes) * 100).toFixed(0),\n      };\n    }\n    return { sum: 0, totalNodes: 0, percentage: 0 };\n  }\n\n  get settings() {\n    return this._settings;\n  }\n\n  get canDrillDown() {\n    return !this.isRoot;\n  }\n\n  get canDrillUp() {\n    return this.isRoot && this._parentNode != null;\n  }\n\n  get collapsible() {\n    return !this._collapsed && this.childrenLength > 0;\n  }\n\n  get expandable() {\n    return this._collapsed;\n  }\n\n  get draggable() {\n    return !this.isRoot;\n  }\n\n  get deletable() {\n    return !this.isRoot;\n  }\n\n  set id(value) {\n    this._id = value;\n  }\n\n  set name(value) {\n    this._name = value;\n    this.editing = false;\n  }\n\n  set editing(value) {\n    this._editing = value;\n    this._firstEdit = false;\n  }\n\n  set collapsed(value) {\n    if (this._children.length) this._collapsed = value;\n  }\n\n  set children(value) {\n    this._children = value;\n  }\n\n  set parent(value) {\n    this._parentNode = value;\n  }\n\n  set done(value) {\n    this._done = value ? true : false;\n  }\n}\n","import { store } from \"@/store\";\r\n/** @type {import(\"./node\").Node} */\r\nimport { NodeDefaultSettings, Node } from \"@/node\";\r\n\r\nclass Tree {\r\n  constructor() {\r\n    this._gidCounter = 1;\r\n    this._root = new Node(0, 0, null, 0, { name: \"root\", isRoot: true });\r\n    this.lastNode = this._root;\r\n    this._query = [];\r\n    this.loaded = false;\r\n    store.dispatch(\"getTreeData\").then((data) => {\r\n      this.parseTreeData(data);\r\n      this.loaded = true;\r\n    });\r\n  }\r\n\r\n  addSibling() {\r\n    if (this._lastNode.editing) {\r\n      this._lastNode.editing = false;\r\n      this._lastNode._name = this._lastNode._name.trim();\r\n      return;\r\n    }\r\n    const node = this.createNode(\r\n      this.lastNodeID,\r\n      this.lastNodeParent ? this.lastNodeParent : this._root,\r\n      this._lastNode.depth || 1\r\n    );\r\n\r\n    this.lastNodeParent\r\n      ? this.pushNode(this.lastNodeParent.children, node)\r\n      : this.pushNode(this._root.children, node);\r\n    this.lastNode = node;\r\n  }\r\n\r\n  addChild() {\r\n    if (this._lastNode.editing) {\r\n      this._lastNode.editing = false;\r\n      this._lastNode._name = this._lastNode._name.trim();\r\n    }\r\n    const id = this._lastNode\r\n      ? this._lastNode.children.length\r\n      : this.lastNodeID;\r\n\r\n    const node = this.createNode(\r\n      id,\r\n      this._lastNode,\r\n      (this._lastNode.depth || 0) + 1\r\n    );\r\n\r\n    this._lastNode\r\n      ? this.pushNode(this._lastNode.children, node)\r\n      : this.pushNode(this._root, node);\r\n\r\n    this.lastNode = node;\r\n    this.lastNodeParent.collapsed = false;\r\n  }\r\n\r\n  pushNode(destination, node) {\r\n    destination.push(node);\r\n  }\r\n\r\n  createNode(id = 0, parent = null, depth) {\r\n    return new Node(this.counter, id, parent, depth);\r\n  }\r\n\r\n  deleteLastNode(options = { force: false }) {\r\n    if ((this._lastNode.editing || !this.lastNodeParent) && !options.force)\r\n      return;\r\n    let newLast = null;\r\n\r\n    if (this._lastNode.id - 1 >= 0) {\r\n      newLast = this.lastNodeParent.children[this._lastNode.id - 1];\r\n    } else if (this.lastNodeParent?.parent?.children) {\r\n      newLast = this.lastNodeParent.parent.children[\r\n        this.lastNodeParent.parent.children.length - 1\r\n      ];\r\n    } else {\r\n      newLast = this.lastNodeParent;\r\n    }\r\n    this.lastNodeParent.children.splice(this._lastNode.id, 1);\r\n    this.lastNode = newLast;\r\n  }\r\n\r\n  collapseLastNode() {\r\n    if (this._lastNode.editing) return;\r\n    this._lastNode.collapsed = !this._lastNode.collapsed;\r\n  }\r\n\r\n  editLastNode() {\r\n    if (this._lastNode.editing) return;\r\n    this._lastNode.editing = true;\r\n  }\r\n\r\n  blurLastNode(triggerNode) {\r\n    if (!triggerNode || this._lastNode._gid !== triggerNode._gid) return;\r\n    this._lastNode._firstEdit\r\n      ? this.deleteLastNode({ force: true })\r\n      : (this._lastNode.editing = false);\r\n  }\r\n\r\n  goUp() {\r\n    if (this._lastNode.editing) return;\r\n    if (this._lastNode.id - 1 >= 0) {\r\n      this.lastNode = this.lastNodeParent.children[this._lastNode.id - 1];\r\n    } else {\r\n      if (this.lastNodeParent?.id > 0 && this.lastNodeParent.parent) {\r\n        let closestTopNode;\r\n        for (let i = this.lastNodeParent.id - 1; i >= 0; i--) {\r\n          if (this.lastNodeParent.parent.children[i].children.length) {\r\n            closestTopNode = this.lastNodeParent.parent.children[i];\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (closestTopNode)\r\n          this.lastNode =\r\n            closestTopNode.children[closestTopNode.children.length - 1];\r\n      }\r\n    }\r\n  }\r\n  goDown() {\r\n    if (this._lastNode.editing || !this.lastNodeParent) return;\r\n    if (this._lastNode.id + 1 < this.lastNodeParent.children.length) {\r\n      this.lastNode = this.lastNodeParent.children[this._lastNode.id + 1];\r\n    } else {\r\n      if (\r\n        this.lastNodeParent.parent &&\r\n        this.lastNodeParent.id < this.lastNodeParent.parent.children.length\r\n      ) {\r\n        let closestBottomNode;\r\n        for (\r\n          let i = this.lastNodeParent.id + 1;\r\n          i < this.lastNodeParent.parent.children.length;\r\n          i++\r\n        ) {\r\n          if (this.lastNodeParent.parent.children[i].children.length) {\r\n            closestBottomNode = this.lastNodeParent.parent.children[i];\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (closestBottomNode) this.lastNode = closestBottomNode.children[0];\r\n      }\r\n    }\r\n  }\r\n\r\n  goLeft() {\r\n    if (this._lastNode.editing) return;\r\n    if (!this._lastNode?.parent?.parent) return;\r\n    this.lastNode = this._lastNode.parent;\r\n  }\r\n\r\n  goRight() {\r\n    if (this._lastNode.editing) return;\r\n    if (!this._lastNode || !this._lastNode.children.length) return;\r\n    let index = Math.floor(this._lastNode.children.length / 2);\r\n    this.lastNode = this._lastNode.children[index];\r\n  }\r\n\r\n  getChildren() {\r\n    return this._root._children;\r\n  }\r\n\r\n  cloneNode(node, destination, position) {\r\n    const self = this;\r\n    function deepClone(node, parent) {\r\n      const newNode = new Node(self.counter, node.id, parent, node.depth, {\r\n        name: node.name,\r\n        collapsed: false,\r\n        firstEdit: node.firstEdit,\r\n        children: [],\r\n        done: node.done,\r\n        settings: node.settings,\r\n      });\r\n      newNode.children = node.getChildren().map((n) => deepClone(n, newNode));\r\n      return newNode;\r\n    }\r\n    const newNode =\r\n      position === \"bottom\" || position === \"top\"\r\n        ? deepClone(node, destination.parent)\r\n        : deepClone(node, destination);\r\n    node.delete();\r\n    if (!position || position === \"right\") {\r\n      destination.addChild(newNode);\r\n    } else if (!position || position === \"top\") {\r\n      destination.parent.addChildAtIndex(\r\n        newNode,\r\n        destination.parent._children.indexOf(destination)\r\n      );\r\n    } else if (!position || position === \"bottom\") {\r\n      destination.parent.addChildAtIndex(\r\n        newNode,\r\n        destination.parent._children.indexOf(destination) + 1\r\n      );\r\n    } else {\r\n      return;\r\n    }\r\n    this.lastNode = newNode;\r\n  }\r\n\r\n  exportToStore() {\r\n    return parse(this._query.length ? this._query[0] : this._root);\r\n    function parse(data) {\r\n      const node = {\r\n        name: data.name,\r\n        children: data.getChildren()?.length\r\n          ? data.getChildren().map((c) => {\r\n              if (c.getChildren().length) {\r\n                return parse(c);\r\n              } else {\r\n                const child = {\r\n                  name: c.name,\r\n                };\r\n                assign(child, c);\r\n                return child;\r\n              }\r\n            })\r\n          : [],\r\n      };\r\n      assign(node, data);\r\n      return node;\r\n    }\r\n    function assign(node, data) {\r\n      if (data.collapsed) node.collapsed = true;\r\n      if (data.done) node.done = true;\r\n      if (data.emoji?.length) node.emoji = data.emoji;\r\n      if (\r\n        JSON.stringify(data.settings) !== JSON.stringify(NodeDefaultSettings)\r\n      ) {\r\n        node.settings = {};\r\n        Object.entries(data.settings).forEach(([k, v]) => {\r\n          if (v !== NodeDefaultSettings[k]) node.settings[k] = v;\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  parseTreeData(treeData) {\r\n    if (!treeData) return;\r\n    let self = this;\r\n    this._root.name = treeData.name ? treeData.name : \"root\";\r\n    this._root.children = [];\r\n    this._lastNode = this._root;\r\n    this._gidCounter = 1;\r\n    if (!treeData.children) return;\r\n    for (let node of treeData.children) {\r\n      parse(node, this._root);\r\n    }\r\n\r\n    function parse(data, parent) {\r\n      let newNode = new Node(\r\n        self.counter,\r\n        parent.children.length,\r\n        parent,\r\n        parent.depth + 1 || 0,\r\n        {\r\n          name: data.name,\r\n          firstEdit: false,\r\n          collapsed: data.collapsed || false,\r\n          emoji: data.emoji,\r\n          done: data.done,\r\n          settings: data.settings,\r\n        }\r\n      );\r\n      newNode.children = data.children?.length\r\n        ? parseChildren(data, newNode)\r\n        : [];\r\n      parent.children.push(newNode);\r\n    }\r\n\r\n    function parseChildren(data, parent) {\r\n      return data?.children?.map((child, index) => {\r\n        let newNode = new Node(self.counter, index, parent, parent.depth + 1, {\r\n          name: child.name,\r\n          firstEdit: false,\r\n          collapsed: child.collapsed || false,\r\n          emoji: child.emoji,\r\n          done: child.done,\r\n          settings: child.settings,\r\n        });\r\n        newNode.children = child.children?.length\r\n          ? parseChildren(child, newNode)\r\n          : [];\r\n        return newNode;\r\n      });\r\n    }\r\n  }\r\n\r\n  spliceRootsQuery(spliceAmount) {\r\n    if (spliceAmount <= 0 || spliceAmount > this._query.length) return;\r\n    if (spliceAmount > 1)\r\n      this._query = this._query.slice(0, -(spliceAmount - 1));\r\n    const newRoot = this._query.pop();\r\n    this._root.isRoot = false;\r\n    newRoot.isRoot = true;\r\n    this._root = newRoot;\r\n  }\r\n\r\n  pushRootToQuery(newRoot) {\r\n    if (!newRoot || !(newRoot instanceof Node)) return;\r\n    this._query.push(this._root);\r\n    newRoot.collapsed = false;\r\n    this._root.isRoot = false;\r\n    newRoot.isRoot = true;\r\n    this._root = newRoot;\r\n  }\r\n\r\n  sortLastNode(by, direction) {\r\n    console.log(by, direction);\r\n    this.lastNode._children.sort((a, b) => (a.name < b.name ? -1 : 1));\r\n  }\r\n\r\n  get lastNodeID() {\r\n    return this.lastNodeParent\r\n      ? this.lastNodeParent.children.length\r\n      : this._root.children.length;\r\n  }\r\n\r\n  get lastNode() {\r\n    return this._lastNode;\r\n  }\r\n\r\n  get lastNodeParent() {\r\n    return this._lastNode?.parent || null;\r\n  }\r\n\r\n  get counter() {\r\n    return this._gidCounter++;\r\n  }\r\n\r\n  get root() {\r\n    return this._root;\r\n  }\r\n\r\n  get query() {\r\n    return this._query;\r\n  }\r\n\r\n  get hasQuery() {\r\n    return this._query?.length > 0 ? true : false;\r\n  }\r\n\r\n  set lastNode(node) {\r\n    if (!(node instanceof Node))\r\n      return !node?._root\r\n        ? console.error(`${node} is not instance of Node`)\r\n        : null;\r\n    if (this._lastNode === node) return;\r\n    if (this?._lastNode?.editing) this._lastNode.editing = false;\r\n    this._lastNode = node;\r\n  }\r\n}\r\n\r\nexport const tree = new Tree();\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('button',{on:{\"click\":function($event){return _vm.$emit('return')}}},[_c('b-icon',{attrs:{\"icon\":\"arrow-left\"}})],1),_c('div',{staticClass:\"pre-wrapper\"},[_c('pre',[_vm._v(_vm._s(_vm.treeData))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"wrapper\">\n    <button @click=\"$emit('return')\">\n      <b-icon icon=\"arrow-left\"></b-icon>\n    </button>\n    <div class=\"pre-wrapper\">\n      <pre>{{ treeData }}</pre>\n    </div>\n  </div>\n</template>\n<script>\nimport { tree } from \"@/tree\";\n\nexport default {\n  name: \"ExportJSON\",\n\n  data() {\n    return {\n      treeData: tree.exportToStore(),\n    };\n  },\n  created() {\n    var text = JSON.stringify(this.treeData),\n      blob = new Blob([text], { type: \"text/json\" }),\n      anchor = document.createElement(\"a\");\n\n    anchor.download = \"tree-data.json\";\n    anchor.href = (window.webkitURL || window.URL).createObjectURL(blob);\n    anchor.dataset.downloadurl = [\n      \"text/plain\",\n      anchor.download,\n      anchor.href,\n    ].join(\":\");\n    anchor.click();\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.wrapper {\n  padding: 0.5rem;\n  position: relative;\n\n  // .pre-wrapper {\n  //   max-height: 90vh;\n  //   overflow: auto;\n  // }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportJSON.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportJSON.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExportJSON.vue?vue&type=template&id=864979cc&scoped=true&\"\nimport script from \"./ExportJSON.vue?vue&type=script&lang=js&\"\nexport * from \"./ExportJSON.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ExportJSON.vue?vue&type=style&index=0&id=864979cc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"864979cc\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <modal\n    name=\"docs-modal\"\n    :adaptive=\"true\"\n    height=\"auto\"\n    width=\"30%\"\n    @before-close=\"beforeClose\"\n  >\n    <export-JSON\n      @return=\"switchTab('docs')\"\n      v-if=\"currTab === 'export'\"\n    ></export-JSON>\n    <div v-else-if=\"currTab === 'import'\">import</div>\n    <div v-else class=\"doc-menu\">\n      <div class=\"buttons\">\n        <button class=\"doc-new\" @click=\"createNewDocument\">\n          <b-icon icon=\"file-earmark-plus\"></b-icon>\n        </button>\n        <div class=\"import-export\">\n          <button class=\"doc-export\" @click=\"exportJSON\">\n            <b-icon icon=\"upload\"></b-icon>\n          </button>\n          <!-- <button class=\"doc-import\" @click=\"switchTab('import')\">\n            <b-icon icon=\"download\"></b-icon>\n          </button> -->\n        </div>\n      </div>\n      <div class=\"doc-list\">\n        <div\n          class=\"doc\"\n          :class=\"{ active: activeDoc(uuid) }\"\n          v-for=\"(doc, uuid) in documents\"\n          :key=\"uuid\"\n          @click=\"setDocument(uuid)\"\n        >\n          <div v-if=\"uuid !== editingDoc\" class=\"content\">\n            <span class=\"doc-name\">{{ doc.name }}</span>\n            <span>\n              <span v-if=\"doc.lastEdit\" class=\"doc-date\">{{\n                timeAgo(doc.lastEdit)\n              }}</span>\n              <button @click.stop=\"enterDocEdit(doc, uuid)\">\n                <b-icon icon=\"pencil-square\"></b-icon>\n              </button>\n              <button @click.stop=\"deleteDocument(uuid)\">\n                <b-icon icon=\"trash\"></b-icon>\n              </button>\n            </span>\n          </div>\n          <div v-else class=\"content\">\n            <div class=\"name-input\">\n              <input\n                type=\"text\"\n                v-model=\"newDocName\"\n                @click.stop\n                @keydown.stop\n                @keydown.enter=\"saveDocName(doc)\"\n                @keydown.esc=\"leaveDocEdit()\"\n                @mousewheel.stop\n                ref=\"docNameInput\"\n              />\n            </div>\n            <div>\n              <button @click=\"leaveDocEdit(doc)\">\n                <b-icon icon=\"x\"></b-icon>\n              </button>\n              <button @click=\"saveDocName(doc)\">\n                <b-icon icon=\"check2\"></b-icon>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </modal>\n</template>\n<script>\nimport { mapActions } from \"vuex\";\nimport { store } from \"@/store\";\nimport { tree } from \"@/tree\";\nimport ExportJSON from \"@/components/ExportJSON\";\n\nexport default {\n  name: \"DocumentsList\",\n  data() {\n    return {\n      store,\n      newDocName: \"\",\n      editingDoc: \"\",\n      currTab: \"\",\n    };\n  },\n  components: { ExportJSON },\n  computed: {\n    documents() {\n      return store.state.documents;\n    },\n  },\n  methods: {\n    ...mapActions({\n      setDocumentAction: \"setDocument\",\n      createDocumentAction: \"createDocument\",\n      deleteDocumentAction: \"deleteDocument\",\n    }),\n    setDocument(uuid) {\n      this.setDocumentAction(uuid).then((data) => tree.parseTreeData(data));\n    },\n    createNewDocument() {\n      this.createDocumentAction().then((data) => tree.parseTreeData(data));\n    },\n    enterDocEdit(doc, uuid) {\n      this.newDocName = doc.name;\n      this.editingDoc = uuid;\n      this.$nextTick(() => {\n        if (this.$refs.docNameInput && this.$refs.docNameInput[0])\n          this.$refs.docNameInput[0].focus();\n      });\n    },\n    leaveDocEdit() {\n      this.newDocName = \"\";\n      this.editingDoc = \"\";\n    },\n    saveDocName(doc) {\n      doc.name = this.newDocName;\n      this.leaveDocEdit();\n    },\n    deleteDocument(uuid) {\n      this.deleteDocumentAction(uuid).then((data) => {\n        if (!this.activeDoc(uuid)) tree.parseTreeData(data);\n      });\n    },\n    activeDoc(id) {\n      return id === store.state.settings.lastDocument;\n    },\n    switchTab(tabName) {\n      this.currTab =\n        tabName === \"export\" || tabName === \"import\" ? tabName : \"\";\n    },\n    exportJSON() {\n      var text = JSON.stringify(tree.exportToStore(), null, \"\\t\"),\n        blob = new Blob([text], { type: \"text/json\" }),\n        anchor = document.createElement(\"a\");\n\n      anchor.download = \"tree-data.json\";\n      anchor.href = (window.webkitURL || window.URL).createObjectURL(blob);\n      anchor.dataset.downloadurl = [\n        \"text/plain\",\n        anchor.download,\n        anchor.href,\n      ].join(\":\");\n      anchor.click();\n    },\n\n    beforeClose() {\n      this.newDocName = \"\";\n      this.editingDoc = \"\";\n    },\n\n    timeAgo(ts) {\n      const date = new Date(ts);\n      // prettier-ignore\n      const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n      return `${date.getHours()}:${date.getMinutes()} ${date.getDate()} ${\n        months[date.getMonth()]\n      }`;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.doc-menu {\n  flex-grow: 1;\n  background-color: white;\n  border-radius: 0.2rem;\n  padding: 0.5rem;\n  user-select: none;\n}\n\n.buttons {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n  justify-content: space-between;\n\n  .import-export {\n    display: flex;\n    gap: 0.5rem;\n  }\n}\n\n.doc-list {\n  background-color: #e6e6e6;\n  padding: 0.5rem;\n  border-radius: 0.2rem;\n  margin-top: 0.5rem;\n  border: 1px solid #b3b3b3;\n\n  .doc > .content {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    gap: 2rem;\n    align-items: center;\n    padding: 0.2rem;\n    border-radius: 0.2rem;\n\n    .doc-date {\n      font-size: 0.8rem;\n    }\n    span {\n      padding: 0;\n      margin: 0;\n    }\n\n    button {\n      margin-left: 0.5rem;\n    }\n\n    .name-input {\n      position: relative;\n      flex-grow: 1;\n\n      input {\n        width: 95%;\n        height: 2rem;\n        border-radius: 0.4rem;\n        border: none;\n        outline: none;\n        background-color: var(--primary-clr);\n        box-sizing: border-box;\n        padding-left: 0.5rem;\n        width: 100%;\n        &:focus {\n          // border: 2px solid var(--secondary-clr);\n          box-shadow: inset 1px 1px 4px 0px rgba(0, 0, 0, 0.75);\n        }\n      }\n    }\n  }\n  .doc:not(:last-child) {\n    margin-bottom: 0.5rem;\n  }\n  .doc.active {\n    color: var(--primary-clr);\n    background-color: var(--secondary-clr);\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocumentsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocumentsList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DocumentsList.vue?vue&type=template&id=7350f5ce&scoped=true&\"\nimport script from \"./DocumentsList.vue?vue&type=script&lang=js&\"\nexport * from \"./DocumentsList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DocumentsList.vue?vue&type=style&index=0&id=7350f5ce&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7350f5ce\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"breadcrumb\"},[_c('span',_vm._l((_vm.query),function(q,index){return _c('span',{key:index},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.popStack(index)}}},[_vm._v(_vm._s(q))]),(index + 1 < _vm.queryLen)?_c('b-icon',{attrs:{\"icon\":\"chevron-right\",\"shift-v\":\"-2\",\"shift-h\":\"1\"}}):_vm._e()],1)}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"breadcrumb\">\n    <span>\n      <span v-for=\"(q, index) in query\" :key=\"index\">\n        <a href=\"#\" @click=\"popStack(index)\">{{ q }}</a>\n        <b-icon\n          v-if=\"index + 1 < queryLen\"\n          icon=\"chevron-right\"\n          shift-v=\"-2\"\n          shift-h=\"1\"\n        ></b-icon>\n      </span>\n    </span>\n  </div>\n</template>\n<script>\nimport { tree } from \"@/tree\";\n\nexport default {\n  name: \"Breadcrumb\",\n  computed: {\n    query() {\n      return tree.query.map((q) => q.name);\n    },\n    queryLen() {\n      return tree.query.length;\n    },\n  },\n  methods: {\n    popStack(amount) {\n      tree.spliceRootsQuery(tree.query.length - amount);\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.breadcrumb {\n  position: absolute;\n  bottom: 1rem;\n  left: 1rem;\n  user-select: none;\n  z-index: 10;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Breadcrumb.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Breadcrumb.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Breadcrumb.vue?vue&type=template&id=5c3988ec&\"\nimport script from \"./Breadcrumb.vue?vue&type=script&lang=js&\"\nexport * from \"./Breadcrumb.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Breadcrumb.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shown),expression:\"shown\"}],staticClass:\"bar\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"search\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchInput),expression:\"searchInput\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.searchInput)},on:{\"keydown\":function($event){$event.stopPropagation();},\"mousewheel\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.searchInput=$event.target.value}}}),_c('span',{staticClass:\"input-icon\"},[_c('b-icon',{attrs:{\"icon\":\"search\"}})],1)]),_c('button',{on:{\"click\":_vm.close}},[_c('b-icon',{attrs:{\"icon\":\"x\"}})],1)]),(_vm.favorites.length)?_c('div',{staticClass:\"favorites-list\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"Favorites:\")]),_c('div',{staticClass:\"flex-wrapper\"},_vm._l((_vm.favorites),function(e){return _c('div',{key:e.key},[_c('div',{staticClass:\"emoji\",class:{\n              selected: _vm.isSelected(e.key),\n            },attrs:{\"title\":e.key},domProps:{\"textContent\":_vm._s(e.emoji)},on:{\"click\":function($event){return _vm.toggleEmoji(e.key)},\"contextmenu\":function($event){$event.preventDefault();return _vm.toggleFavorite(e.key)}}})])}),0),_c('hr')]):_vm._e(),(_vm.currentNodeEmoji.length)?_c('div',{staticClass:\"favorites-list\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"Current node:\")]),_c('div',{staticClass:\"flex-wrapper\"},_vm._l((_vm.currentNodeEmoji),function(e){return _c('div',{key:e.key},[_c('div',{staticClass:\"emoji\",attrs:{\"title\":e.key},domProps:{\"textContent\":_vm._s(e.emoji)},on:{\"click\":function($event){return _vm.toggleEmoji(e.key)},\"contextmenu\":function($event){$event.preventDefault();return _vm.toggleFavorite(e.key)}}})])}),0),_c('hr')]):_vm._e(),(_vm.searchInput)?_c('div',{staticClass:\"emoji-list\"},[_c('div',{staticClass:\"flex-wrapper\"},_vm._l((_vm.searchResult),function(e){return _c('div',{key:e.key},[_c('div',{staticClass:\"emoji\",class:{\n              selected: _vm.isSelected(e.key),\n            },attrs:{\"title\":e.key},domProps:{\"textContent\":_vm._s(e.emoji)},on:{\"click\":function($event){return _vm.toggleEmoji(e.key)}}})])}),0)]):_c('div',{staticClass:\"emoji-list\"},[_c('div',{staticClass:\"flex-wrapper\"},_vm._l((_vm.emojis.emoji),function(emoji,key){return _c('div',{key:key,staticClass:\"emoji\",class:{\n            selected: _vm.isSelected(key),\n          },attrs:{\"title\":key},domProps:{\"textContent\":_vm._s(emoji)},on:{\"click\":function($event){return _vm.toggleEmoji(key)},\"contextmenu\":function($event){$event.preventDefault();return _vm.toggleFavorite(key)}}})}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from \"vue\";\r\n\r\nexport const eventBus = new Vue();\r\n\r\nexport const events = [\r\n  // { name: \"Set root\", action: \"tree-push-root\", hotkey: \"g\" },\r\n  // { name: \"Set root\", action: \"tree-pop-root\", hotkey: \"h\" },\r\n  {\r\n    title: \"Add Child\",\r\n    icon: \"diagram2\",\r\n    event: \"tree-add-child\",\r\n    hotkey: \"tab\",\r\n    options: { prevent: true },\r\n  },\r\n  {\r\n    title: \"Add Sibling\",\r\n    icon: \"node-plus\",\r\n    event: \"tree-add-sibling\",\r\n    hotkey: \"enter\",\r\n  },\r\n  {\r\n    title: \"Collapse Node\",\r\n    icon: \"arrows-collapse\",\r\n    event: \"tree-node-collapse\",\r\n    hotkey: \"c\",\r\n  },\r\n  {\r\n    title: \"Edit Node\",\r\n    icon: \"pencil\",\r\n    event: \"tree-node-edit\",\r\n    hotkey: \"e\",\r\n  },\r\n\r\n  {\r\n    title: \"Toggle Node Done State\",\r\n    icon: \"check2\",\r\n    event: \"tree-node-toggle-done\",\r\n    hotkey: \"f\",\r\n  },\r\n  {\r\n    title: \"Delete Node\",\r\n    icon: \"trash\",\r\n    event: \"tree-delete-last-node\",\r\n    hotkey: [\"d\", \"delete\", \"backspace\"],\r\n  },\r\n  {\r\n    title: \"Cursor Up\",\r\n    event: \"tree-go-up\",\r\n    hotkey: \"arrowup\",\r\n    UIIgnore: true,\r\n  },\r\n  {\r\n    title: \"Cursor Right\",\r\n    event: \"tree-go-right\",\r\n    hotkey: \"arrowright\",\r\n    UIIgnore: true,\r\n  },\r\n  {\r\n    title: \"Cursor Down\",\r\n    event: \"tree-go-down\",\r\n    hotkey: \"arrowdown\",\r\n    UIIgnore: true,\r\n  },\r\n  {\r\n    title: \"Cursor Left\",\r\n    event: \"tree-go-left\",\r\n    hotkey: \"arrowleft\",\r\n    UIIgnore: true,\r\n  },\r\n  {\r\n    title: \"Save Document\",\r\n    event: \"document-save\",\r\n    hotkey: \"ctrl+s\",\r\n    options: { prevent: true },\r\n    UIIgnore: true,\r\n  },\r\n];\r\n\r\nconst eventsMap = {};\r\n\r\nexport function Init() {\r\n  window.addEventListener(\"keydown\", keydown);\r\n  window.addEventListener(\"unload\", unload);\r\n\r\n  for (let event of events) {\r\n    if (!(event.hotkey instanceof Array)) {\r\n      event.hotkey = [event.hotkey];\r\n    }\r\n\r\n    for (let key of event.hotkey) {\r\n      const k = key.toLowerCase();\r\n      if (eventsMap[k]) {\r\n        console.error(\r\n          `Multiple hotkeys binding on single event: ${event.event}`\r\n        );\r\n        continue;\r\n      }\r\n      eventsMap[k] = event;\r\n    }\r\n  }\r\n}\r\n\r\nfunction keydown(e) {\r\n  const key = getCombination(e);\r\n  const match = eventsMap[key];\r\n  if (match) call(match.event, e, match.options);\r\n\r\n  function call(eventName, event, options = { prevent: false }) {\r\n    if (options.prevent) e.preventDefault();\r\n    eventBus.$emit(eventName, event);\r\n  }\r\n}\r\n\r\nfunction getCombination(event) {\r\n  let combination = [];\r\n\r\n  if (event.ctrlKey && event.key !== \"Control\") combination.push(\"ctrl\");\r\n  if (event.altKey && event.key !== \"Alt\") combination.push(\"alt\");\r\n  if (event.shiftKey && event.key !== \"Shift\") combination.push(\"shift\");\r\n\r\n  combination.push(event.key.toLowerCase());\r\n  return combination.join(\"+\");\r\n}\r\n\r\nfunction unload() {\r\n  window.removeEventListener(\"keydown\", keydown);\r\n  window.removeEventListener(\"unload\", unload);\r\n}\r\n","<template>\n  <transition name=\"slide\">\n    <div class=\"bar\" v-show=\"shown\">\n      <div class=\"title\">\n        <div class=\"search\">\n          <input\n            type=\"text\"\n            v-model=\"searchInput\"\n            @keydown.stop\n            @mousewheel.stop\n          />\n          <span class=\"input-icon\">\n            <b-icon icon=\"search\"></b-icon>\n          </span>\n        </div>\n        <button @click=\"close\">\n          <b-icon icon=\"x\"></b-icon>\n        </button>\n      </div>\n      <div class=\"favorites-list\" v-if=\"favorites.length\">\n        <span class=\"title\">Favorites:</span>\n        <div class=\"flex-wrapper\">\n          <div v-for=\"e in favorites\" :key=\"e.key\">\n            <div\n              class=\"emoji\"\n              :class=\"{\n                selected: isSelected(e.key),\n              }\"\n              :title=\"e.key\"\n              @click=\"toggleEmoji(e.key)\"\n              @contextmenu.prevent=\"toggleFavorite(e.key)\"\n              v-text=\"e.emoji\"\n            ></div>\n          </div>\n        </div>\n        <hr />\n      </div>\n      <div class=\"favorites-list\" v-if=\"currentNodeEmoji.length\">\n        <span class=\"title\">Current node:</span>\n        <div class=\"flex-wrapper\">\n          <div v-for=\"e in currentNodeEmoji\" :key=\"e.key\">\n            <div\n              class=\"emoji\"\n              :title=\"e.key\"\n              @click=\"toggleEmoji(e.key)\"\n              @contextmenu.prevent=\"toggleFavorite(e.key)\"\n              v-text=\"e.emoji\"\n            ></div>\n          </div>\n        </div>\n        <hr />\n      </div>\n      <div class=\"emoji-list\" v-if=\"searchInput\">\n        <div class=\"flex-wrapper\">\n          <div v-for=\"e in searchResult\" :key=\"e.key\">\n            <div\n              class=\"emoji\"\n              :class=\"{\n                selected: isSelected(e.key),\n              }\"\n              :title=\"e.key\"\n              @click=\"toggleEmoji(e.key)\"\n              v-text=\"e.emoji\"\n            ></div>\n          </div>\n        </div>\n      </div>\n      <div class=\"emoji-list\" v-else>\n        <div class=\"flex-wrapper\">\n          <div\n            v-for=\"(emoji, key) in emojis.emoji\"\n            :key=\"key\"\n            class=\"emoji\"\n            :class=\"{\n              selected: isSelected(key),\n            }\"\n            :title=\"key\"\n            @click=\"toggleEmoji(key)\"\n            @contextmenu.prevent=\"toggleFavorite(key)\"\n            v-text=\"emoji\"\n          ></div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n<script>\nimport emojis from \"node-emoji\";\nimport { store } from \"@/store\";\nimport { eventBus } from \"@/hotkeys\";\nimport { tree } from \"@/tree\";\n\nexport default {\n  name: \"EmojiBar\",\n  data() {\n    return {\n      emojis,\n      tree,\n      searchInput: \"\",\n      shown: false,\n      favoritesRaw: store.state.favoriteEmojis || [],\n    };\n  },\n  computed: {\n    favorites() {\n      return this.favoritesRaw.map((e) => emojis.find(e));\n    },\n    currentNodeEmoji() {\n      return this.tree.lastNode?.emoji?.map((e) => emojis.find(e)) || [];\n    },\n    searchResult() {\n      return emojis.search(this.searchInput);\n    },\n  },\n  // TODO use vuex actions instead of mutattions\n  methods: {\n    toggleEmoji(emoji) {\n      if (!emoji) return;\n      eventBus.$emit(\"tree-node-toggle-emoji\", emoji);\n    },\n    toggleFavorite(emoji) {\n      if (!emoji) return;\n      this.favorites.some((f) => f.key === emoji)\n        ? this.removeFavorite(emoji)\n        : this.addFavorite(emoji);\n    },\n    addFavorite(emoji) {\n      if (!emoji) return;\n      store.commit(\"addFavoriteEmoji\", emoji);\n    },\n    removeFavorite(emoji) {\n      if (!emoji) return;\n      store.commit(\"removeFavoriteEmoji\", emoji);\n    },\n    isSelected(emoji) {\n      if (!emoji) return;\n      return this.currentNodeEmoji.some((c) => c.key === emoji);\n    },\n    toggle() {\n      this.shown ? this.close() : this.open();\n    },\n    close() {\n      this.shown = false;\n    },\n    open() {\n      this.shown = true;\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.bar {\n  position: absolute;\n  top: 0;\n  right: 0;\n  max-width: 20rem;\n  z-index: 999;\n  overflow: auto;\n  max-height: 100%;\n  background-color: white;\n  user-select: none;\n  overflow-x: hidden;\n\n  .title {\n    text-align: center;\n    padding: 0.2rem;\n    display: flex;\n    align-items: flex-start;\n    gap: 0.4rem;\n    width: 97%;\n\n    .search {\n      position: relative;\n      flex-grow: 1;\n\n      input {\n        width: 95%;\n        height: 2rem;\n        border-radius: 0.4rem;\n        border: none;\n        outline: none;\n        background-color: var(--primary-clr);\n        box-sizing: border-box;\n        padding-left: 2rem;\n        width: 100%;\n        &:focus {\n          // border: 2px solid var(--secondary-clr);\n          box-shadow: inset 1px 1px 4px 0px rgba(0, 0, 0, 0.75);\n        }\n      }\n\n      .input-icon {\n        position: absolute;\n        top: 0.5rem;\n        left: 0.7rem;\n      }\n    }\n    button {\n      // width: 1rem;\n      height: 2rem;\n    }\n  }\n\n  .emoji-list,\n  .favorites-list {\n    .flex-wrapper {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 0.1rem;\n    }\n    .title {\n      width: 100%;\n    }\n\n    .emoji {\n      box-sizing: border-box;\n      border-radius: 0.2rem;\n      width: 1.8rem;\n      height: 1.8rem;\n      text-align: center;\n      font-size: 1rem;\n      vertical-align: middle;\n\n      &.selected {\n        border: 2px solid green;\n      }\n    }\n  }\n}\n\nhr {\n  width: 80%;\n}\n\n.slide-enter-active {\n  transition: all 0.2s ease;\n}\n.slide-leave-active {\n  transition: all 0.2s cubic-bezier(1, 0.5, 0.8, 1);\n}\n.slide-enter,\n.slide-leave-to {\n  transform: translateX(10rem);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmojiBar.vue?vue&type=template&id=3c9243a4&\"\nimport script from \"./EmojiBar.vue?vue&type=script&lang=js&\"\nexport * from \"./EmojiBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EmojiBar.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <modal name=\"info-modal\" :adaptive=\"true\" height=\"auto\" width=\"500px\">\n      <div id=\"modal\">\n        <table class=\"info-table\">\n          <tr v-for=\"(e, index) in events\" :key=\"index\" class=\"info-row\">\n            <td class=\"info-col-action\">\n              {{ e.title }}\n            </td>\n            <td class=\"info-col-hotkey\">\n              {{ e.hotkey.join(\" / \") }}\n            </td>\n          </tr>\n        </table>\n      </div>\n    </modal>\n    <breadcrumb></breadcrumb>\n    <documents-list></documents-list>\n    <div class=\"toolbar\">\n      <div class=\"left-buttons\">\n        <div\n          v-for=\"(action, index) in actions\"\n          :key=\"index\"\n          :title=\"action.title\"\n        >\n          <button\n            v-if=\"condSatisfied(action)\"\n            @click.stop=\"emitEvent(action.event)\"\n          >\n            <b-icon :icon=\"action.icon\"></b-icon>\n          </button>\n        </div>\n      </div>\n      <div class=\"right-buttons\">\n        <button @click.stop=\"toggleDocMenu\">\n          <b-icon icon=\"file-earmark-text\"></b-icon>\n        </button>\n        <button @click=\"toggleEmojiBar\">\n          <b-icon icon=\"emoji-smile\"></b-icon>\n        </button>\n        <button @click=\"$modal.show('info-modal')\">\n          <b-icon icon=\"question\"></b-icon>\n        </button>\n      </div>\n    </div>\n    <emoji-bar class=\"emoji-bar\" ref=\"emojiBar\"></emoji-bar>\n  </div>\n</template>\n<script>\nimport DocumentsList from \"@/components/DocumentsList\";\nimport Breadcrumb from \"@/components/Breadcrumb\";\nimport EmojiBar from \"@/components/EmojiBar\";\n\nimport { tree } from \"@/tree\";\nimport { eventBus, events } from \"@/hotkeys\";\n\nexport default {\n  name: \"Toolbar\",\n  components: {\n    DocumentsList,\n    Breadcrumb,\n    EmojiBar,\n  },\n  data() {\n    return {\n      tree,\n      events,\n      actions: [\n        { title: \"Add child\", icon: \"diagram2\", event: \"tree-add-child\" },\n        {\n          title: \"Add sibling\",\n          icon: \"node-plus\",\n          event: \"tree-add-sibling\",\n        },\n        {\n          title: \"Collapse\",\n          cond: () => tree.lastNode.collapsible,\n          icon: \"arrows-collapse\",\n          event: \"tree-node-collapse\",\n        },\n        {\n          title: \"Expand\",\n          cond: () => tree.lastNode.expandable,\n          icon: \"arrows-expand\",\n          event: \"tree-node-collapse\",\n        },\n        { title: \"Edit\", icon: \"pencil\", event: \"tree-node-edit\" },\n        {\n          title: \"Drill down\",\n          cond: () => tree.lastNode.canDrillDown,\n          icon: \"arrow-bar-down\",\n          event: \"tree-push-root\",\n        },\n        {\n          title: \"Drill up\",\n          cond: () => tree.lastNode.canDrillUp,\n          icon: \"arrow-bar-up\",\n          event: \"tree-pop-root\",\n        },\n        {\n          title: \"Mark done\",\n          icon: \"check2\",\n          event: \"tree-node-toggle-done\",\n        },\n        {\n          title: \"Do all children\",\n          cond: () => tree.lastNode.childrenLength > 0,\n          icon: \"check2-square\",\n          event: \"tree-node-do-all-children\",\n        },\n        {\n          title: \"Undo all children\",\n          cond: () => tree.lastNode.childrenLength > 0,\n          icon: \"x-square\",\n          event: \"tree-node-undo-all-children\",\n        },\n      ],\n    };\n  },\n  methods: {\n    emitEvent(event) {\n      if (!event) return;\n      eventBus.$emit(event);\n    },\n\n    condSatisfied(action) {\n      if (!action.cond) return true;\n      return typeof action.cond === \"function\"\n        ? action.cond()\n        : action.cond == false\n        ? false\n        : true;\n    },\n    toggleEmojiBar() {\n      this.$refs?.emojiBar?.toggle();\n    },\n    toggleDocMenu() {\n    this.$modal.show(\"docs-modal\")\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.toolbar {\n  overflow: hidden;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: fit-content;\n\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  padding: 0.5rem;\n  z-index: 10;\n  background-color: white;\n  box-sizing: border-box;\n  box-shadow: 0px -2px 5px 0px black;\n\n  .left-buttons {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 1px;\n    max-width: 50%;\n\n    button {\n      padding: 0;\n      border-radius: 0;\n      height: 1.7rem;\n      width: 1.7rem;\n      box-shadow: none;\n      // box-shadow: 0 0 2px 0px black;\n      border: 0.5px solid var(--secondary-clr);\n    }\n  }\n\n  .right-buttons {\n    display: flex;\n    gap: 1rem;\n  }\n}\n\n.emoji-bar {\n  box-shadow: 2px -2px 5px 0px black;\n}\n\n::v-deep button {\n  padding: 0.5rem;\n  border-radius: 0.4rem;\n  border: none;\n  z-index: 1;\n  color: black;\n  background-color: var(--node-bg-clr);\n  box-shadow: 0px 0px 5px -2px black;\n}\n\n::v-deep button:active {\n  top: 1.07rem;\n  background-color: var(--primary-clr);\n  box-shadow: 0px 0px 4px -2px black;\n  border: none;\n}\n\n::v-deep button:focus {\n  background-color: var(--primary-clr);\n  outline: none;\n}\n</style>\n<style lang=\"scss\" scoped>\n#modal {\n  padding: 1rem;\n  user-select: none;\n  z-index: 1;\n  pointer-events: none;\n}\n\n.info-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.info-row:nth-child(odd) {\n  background-color: rgba(167, 167, 167, 0.408);\n}\n\n.info-row > td {\n  padding-top: 0.3rem;\n  padding-bottom: 0.3rem;\n  border: 1px solid black;\n}\n\n.info-col-action {\n  width: 50%;\n  padding-right: 1rem;\n  text-align: right;\n}\n\n.info-col-hotkey {\n  width: 50%;\n  padding-left: 1rem;\n  text-align: left;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Toolbar.vue?vue&type=template&id=a6551280&scoped=true&\"\nimport script from \"./Toolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./Toolbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Toolbar.vue?vue&type=style&index=0&id=a6551280&lang=scss&scoped=true&\"\nimport style1 from \"./Toolbar.vue?vue&type=style&index=1&id=a6551280&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a6551280\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shown),expression:\"shown\"},{name:\"on-clickaway\",rawName:\"v-on-clickaway:mousedown\",value:(_vm.close),expression:\"close\",arg:\"mousedown\"}],ref:\"contextMenu\",staticClass:\"context-menu\",style:(_vm.style),attrs:{\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.close()},\"contextmenu\":function($event){$event.preventDefault();}}},[_vm._t(\"items\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    ref=\"contextMenu\"\n    v-show=\"shown\"\n    class=\"context-menu\"\n    :style=\"style\"\n    tabindex=\"0\"\n    v-on-clickaway:mousedown=\"close\"\n    @click=\"close()\"\n    @contextmenu.prevent\n  >\n    <slot name=\"items\" />\n  </div>\n</template>\n<script>\nimport { mixin as clickaway } from \"vue-clickaway2\";\nexport default {\n  mixins: [clickaway],\n  computed: {\n    style() {\n      return { top: `${this.top}px`, left: `${this.left}px` };\n    },\n  },\n  data() {\n    return {\n      top: 0,\n      left: 0,\n      shown: false,\n    };\n  },\n  methods: {\n    open(event) {\n      if (!event) return;\n      let eventY = event.pageY || event.clientY;\n      let eventX = event.pageX || event.clientX;\n      let menuHeight = this.$refs?.contextMenu?.clientHeight || 170;\n      let menuWidth = this.$refs?.contextMenu?.clientWidth || 0;\n      let newY = eventY;\n      let menuBottom = newY + menuHeight;\n      let newX = eventX;\n      let menuRight = newX + menuWidth;\n      if (Math.max(menuBottom, window.innerHeight) === menuBottom) {\n        newY -= menuHeight;\n      }\n      if (Math.max(menuRight, window.innerWidth * 0.5) === menuRight) {\n        newX -= menuWidth;\n      }\n      this.top = newY;\n      this.left = newX;\n      this.$nextTick(() => this.$el.focus());\n      this.shown = true;\n    },\n    close() {\n      if (!this.shown) return;\n      this.shown = false;\n      this.$emit(\"close-event\");\n      this.left = 0;\n      this.top = 0;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.context-menu {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n  outline: none;\n  position: absolute;\n  z-index: 999;\n  padding: 0.4rem 0;\n  width: auto;\n  height: auto;\n  // border-radius: 0.2rem;\n  background-color: var(--context-menu-bg-clr);\n}\n.context-menu > .context-menu-item {\n  transition: background-color 0.2s linear;\n  background-color: var(--context-menu-bg-clr);\n  color: rgba(255, 255, 255, 0.87);\n  text-align: start;\n  padding: 0 3rem 0 0.5rem;\n  margin: 0;\n  border: none;\n  outline: none;\n  height: 1.8rem;\n  cursor: pointer;\n}\n.context-menu > .context-menu-item:hover:enabled {\n  background-color: var(--context-menu-item-hover-clr);\n}\n.context-menu > .context-menu-item:disabled {\n  opacity: 0.2;\n}\n.context-menu > .context-menu-header {\n  margin: 0;\n  padding: 0;\n}\n\n.context-menu-selector {\n  transition: background-color 0.2s linear;\n  background-color: var(--context-menu-bg-clr);\n  color: rgba(255, 255, 255, 0.87);\n  padding: 0 0 0 0.5rem;\n  text-align: start;\n  margin: 0;\n  border: none;\n  outline: none;\n  height: 1.8rem;\n  font-size: 14px;\n  position: relative;\n  &:hover {\n    background-color: var(--context-menu-item-hover-clr);\n    & ul {\n      display: block;\n    }\n  }\n\n  .arrow {\n    float: right;\n    clear: both;\n    margin-right: 0.4rem;\n  }\n\n  ul {\n    position: absolute;\n    display: none;\n    left: 100%;\n    top: -1.3rem;\n    padding: 0.4rem 0;\n    // border-radius: 0 0.2rem 0.2rem 0;\n    background-color: var(--context-menu-bg-clr);\n    overflow: visible;\n    width: 8rem;\n    list-style: none;\n    li {\n      transition: background-color 0.2s linear;\n      background-color: var(--context-menu-bg-clr);\n      color: rgba(255, 255, 255, 0.87);\n      text-align: start;\n      margin: 0;\n      padding: 0;\n      border: none;\n      outline: none;\n      height: 1.8rem;\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      &:hover {\n        background-color: var(--context-menu-item-hover-clr);\n      }\n    }\n\n    &:hover {\n      display: block;\n    }\n  }\n}\n\nhr {\n  margin: 0 auto;\n  width: 70%;\n  border: none;\n  height: 1px;\n  background-color: var(--hr-clr);\n  color: var(--hr-clr);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContextMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContextMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContextMenu.vue?vue&type=template&id=6d6d2422&scoped=true&\"\nimport script from \"./ContextMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./ContextMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContextMenu.vue?vue&type=style&index=0&id=6d6d2422&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d6d2422\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"wrapper\">\r\n    <context-menu ref=\"contextMenu\">\r\n      <template #items>\r\n        <button class=\"context-menu-item\" @click=\"addSibling\">\r\n          <b-icon icon=\"node-plus\"></b-icon>\r\n          Add sibling\r\n        </button>\r\n        <button class=\"context-menu-item\" @click=\"addChild\">\r\n          <b-icon icon=\"diagram2\"></b-icon>\r\n          Add child\r\n        </button>\r\n        <button class=\"context-menu-item\" @click=\"toggleDone\">\r\n          <b-icon :icon=\"tree.lastNode.done ? 'x' : 'check2'\"></b-icon>\r\n          {{ tree.lastNode.done ? \"Undo\" : \"Done\" }}\r\n        </button>\r\n        <button\r\n          class=\"context-menu-item\"\r\n          @click=\"pushRootToQuery\"\r\n          v-if=\"tree.lastNode._children.length && !tree.lastNode.isRoot\"\r\n        >\r\n          <b-icon icon=\"arrow-bar-down\"></b-icon>\r\n          Drill down\r\n        </button>\r\n        <button\r\n          v-if=\"tree.lastNode.childrenLength\"\r\n          class=\"context-menu-item\"\r\n          @click=\"collapseLastNode\"\r\n        >\r\n          <b-icon\r\n            :icon=\"\r\n              tree.lastNode.collapsed ? 'arrows-expand' : 'arrows-collapse'\r\n            \"\r\n          ></b-icon>\r\n          {{ tree.lastNode.collapsed ? \"Expand\" : \"Collapse\" }}\r\n        </button>\r\n        <button class=\"context-menu-item\" @click=\"editLastNode\">\r\n          <b-icon icon=\"pencil\"></b-icon>\r\n          Edit\r\n        </button>\r\n        <button class=\"context-menu-selector\">\r\n          <b-icon icon=\"gear\"></b-icon>\r\n          Settings\r\n          <ul>\r\n            <li\r\n              v-for=\"(value, key) in tree.lastNode.settings\"\r\n              :key=\"key\"\r\n              @click=\"tree.lastNode.toggleSetting(key)\"\r\n            >\r\n              {{ key }}\r\n              <b-icon v-if=\"value\" icon=\"check2\"></b-icon>\r\n            </li>\r\n          </ul>\r\n          <b-icon icon=\"chevron-right\" class=\"arrow\"></b-icon>\r\n        </button>\r\n        <button\r\n          v-if=\"tree.lastNode.deletable\"\r\n          class=\"context-menu-item\"\r\n          @click=\"deleteLastNode\"\r\n        >\r\n          <b-icon icon=\"node-minus\"></b-icon>\r\n          Delete\r\n        </button>\r\n      </template>\r\n    </context-menu>\r\n    <toolbar></toolbar>\r\n    <div\r\n      class=\"tree-container\"\r\n      ref=\"container\"\r\n      :class=\"{ dragging: nodeDrag.dragging }\"\r\n      @mousewheel=\"handleZoom\"\r\n      @click.middle=\"handleZoom\"\r\n    >\r\n      <svg class=\"svg vue-tree\" ref=\"svg\" :style=\"initialTransformStyle\"></svg>\r\n\r\n      <div\r\n        class=\"dom-container\"\r\n        ref=\"domContainer\"\r\n        :style=\"initialTransformStyle\"\r\n      >\r\n        <div\r\n          class=\"node-slot\"\r\n          v-for=\"node of nodeDataList\"\r\n          :key=\"node.data._key\"\r\n          :style=\"{\r\n            left: formatDimension(node.y),\r\n            top: formatDimension(node.x),\r\n            width: formatDimension(config.nodeWidth),\r\n            height: formatDimension(config.nodeHeight),\r\n          }\"\r\n          @dragover.stop=\"mouseOverNode($event, node)\"\r\n          @dragend=\"onDrop($event, node)\"\r\n        >\r\n          <!-- @dragleave=\"mouseLeaveNode($event, node)\" -->\r\n          <div\r\n            class=\"node-slot-overlay\"\r\n            :class=\"{\r\n              'node-top': nodeDrag.snap === 'top' && isDraggedOver(node.data),\r\n              'node-bottom':\r\n                nodeDrag.snap === 'bottom' && isDraggedOver(node.data),\r\n              'node-right':\r\n                nodeDrag.snap === 'right' && isDraggedOver(node.data),\r\n            }\"\r\n          >\r\n            <div\r\n              class=\"node\"\r\n              :class=\"{\r\n                dragover: isDraggedOver(node.data),\r\n\r\n                highlighted: node.data._gid === tree.lastNode._gid,\r\n                stack: node.data.childrenLength && node.data.collapsed,\r\n                done: node.data.done,\r\n              }\"\r\n              :style=\"{\r\n                'max-width': formatDimension(config.nodeMaxWidth),\r\n                'max-height': formatDimension(config.nodeMaxHeight),\r\n              }\"\r\n              @mousedown.stop\r\n              @click=\"setLastNode(node.data, $event)\"\r\n              @contextmenu=\"nodeContextClick($event, node.data)\"\r\n              :draggable=\"node.data.draggable\"\r\n              @dragstart=\"startDrag($event, node)\"\r\n              @drag=\"onDrag()\"\r\n            >\r\n              <div class=\"content\" v-if=\"!node.data.editing\">\r\n                <div\r\n                  v-if=\"\r\n                    !node.data.editing &&\r\n                    node.data.emoji &&\r\n                    node.data.emoji.length\r\n                  \"\r\n                >\r\n                  <span\r\n                    v-for=\"(emoji, key) in emojifyArray(node.data.emoji)\"\r\n                    :key=\"key\"\r\n                    >{{ emoji }}\r\n                  </span>\r\n                </div>\r\n                <pre\r\n                  v-if=\"!node.data.editing\"\r\n                  v-text=\"node.data.name\"\r\n                  @mousewheel.stop\r\n                ></pre>\r\n                <button\r\n                  class=\"drill-up\"\r\n                  v-if=\"node.data.isRoot && tree.hasQuery\"\r\n                  @click.stop=\"spliceRootsQuery\"\r\n                >\r\n                  <b-icon icon=\"arrow-bar-up\"></b-icon>\r\n                </button>\r\n              </div>\r\n              <textarea\r\n                v-if=\"node.data.editing\"\r\n                v-model=\"node.data._name\"\r\n                :ref=\"`node-#${node.data._gid}`\"\r\n                @keydown.esc=\"cancelNodeEdit\"\r\n                @blur=\"blurLastNode(node.data)\"\r\n                @mousewheel.stop\r\n              ></textarea>\r\n              <!-- <button v-if=\"node.data.editing\">Save</button> -->\r\n              <div class=\"controls\">\r\n                <button class=\"add-child\" @click.stop=\"addSibling()\">\r\n                  <b-icon icon=\"node-plus\"></b-icon>\r\n                </button>\r\n                <button class=\"add-sibling\" @click=\"addChild()\">\r\n                  <b-icon icon=\"diagram2\"></b-icon>\r\n                </button>\r\n              </div>\r\n              <div\r\n                v-if=\"shouldDisplayProgress(node.data)\"\r\n                class=\"progress\"\r\n                :class=\"{ 'round-right': node.data.progress == 100 }\"\r\n                :style=\"{ width: `${node.data.progress}%` }\"\r\n                :title=\"`${node.data.progress}%`\"\r\n              >\r\n                <!-- <span>{{ node.data.progress }}%</span> -->\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Toolbar from \"@/components/Toolbar\";\r\nimport ContextMenu from \"@/components/ContextMenu\";\r\n\r\nimport * as d3 from \"d3\";\r\nimport { flextree } from \"d3-flextree\";\r\nconst layout = flextree();\r\n\r\nimport { tree } from \"@/tree\";\r\nimport { events, eventBus } from \"@/hotkeys\";\r\nimport { store } from \"@/store\";\r\nimport { mapActions } from \"vuex\";\r\nimport emojis from \"node-emoji\";\r\n\r\nconst MATCH_TRANSLATE_REGEX = /translate\\((-?\\d+)px, ?(-?\\d+)px\\)/i;\r\nconst MATCH_SCALE_REGEX = /scale\\((\\S*)\\)/i;\r\n\r\nconst LinkStyle = {\r\n  CURVE: \"curve\",\r\n  STRAIGHT: \"straight\",\r\n};\r\n\r\nconst DEFAULT_NODE_WIDTH = 200;\r\nconst DEFAULT_NODE_HEIGHT = 100;\r\nconst DEFAULT_LEVEL_HEIGHT = 200;\r\n\r\nconst ANIMATION_DURATION = 0;\r\n\r\nfunction uuid() {\r\n  const s = [];\r\n  const hexDigits = \"0123456789abcdef\";\r\n  for (let i = 0; i < 36; i++) {\r\n    s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n  }\r\n  s[14] = \"4\";\r\n  s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\r\n  s[8] = s[13] = s[18] = s[23] = \"-\";\r\n  return s.join(\"\");\r\n}\r\n\r\nfunction rotatePoint({ x, y }) {\r\n  return {\r\n    x: y,\r\n    y: x,\r\n  };\r\n}\r\n\r\nexport default {\r\n  name: \"Tree\",\r\n  props: {\r\n    config: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          nodeWidth: DEFAULT_NODE_WIDTH,\r\n          nodeHeight: DEFAULT_NODE_HEIGHT,\r\n          nodeMaxWidth: 150,\r\n          nodeMaxHeight: 200,\r\n          levelHeight: DEFAULT_LEVEL_HEIGHT,\r\n        };\r\n      },\r\n    },\r\n    linkStyle: {\r\n      type: String,\r\n      default: LinkStyle.CURVE,\r\n    },\r\n  },\r\n  components: { Toolbar, ContextMenu },\r\n  data() {\r\n    return {\r\n      d3,\r\n      events,\r\n      store,\r\n      tree,\r\n      colors: \"568FE1\",\r\n      nodeDataList: [],\r\n      linkDataList: [],\r\n      initTransformX: 0,\r\n      initTransformY: 0,\r\n      currentScale: 1,\r\n      nodeDrag: {\r\n        dragging: false,\r\n        source: null,\r\n        target: null,\r\n        snap: \"\",\r\n      },\r\n      key: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    initialTransformStyle() {\r\n      return {\r\n        transform: `scale(1) translate(${this.initTransformX}px, ${this.initTransformY}px)`,\r\n        transformOrigin: \"center\",\r\n      };\r\n    },\r\n  },\r\n  created() {\r\n    this.addUniqueKey(this.tree.root);\r\n    window.addEventListener(\"unload\", this.beforeUnload);\r\n\r\n    eventBus.$on(\"tree-push-root\", this.pushRootToQuery);\r\n    eventBus.$on(\"tree-pop-root\", this.spliceRootsQuery);\r\n    eventBus.$on(\"tree-add-sibling\", this.addSibling);\r\n    eventBus.$on(\"tree-add-child\", this.addChild);\r\n    eventBus.$on(\"tree-set-last-node\", (args) => {\r\n      if (args && args[0]) this.setLastNode(args[0]);\r\n    });\r\n    eventBus.$on(\"tree-node-toggle-done\", this.toggleDone);\r\n    eventBus.$on(\"tree-node-toggle-emoji\", this.toggleEmoji);\r\n    eventBus.$on(\"tree-node-collapse\", this.collapseLastNode);\r\n    eventBus.$on(\"tree-node-edit\", (e) => this.editLastNode(e));\r\n    eventBus.$on(\"tree-node-do-all-children\", this.doAllChildren);\r\n    eventBus.$on(\"tree-node-undo-all-children\", this.undoAllChildren);\r\n\r\n    eventBus.$on(\"tree-delete-last-node\", this.deleteLastNode);\r\n\r\n    eventBus.$on(\"tree-go-up\", this.goUp);\r\n    eventBus.$on(\"tree-go-down\", this.goDown);\r\n    eventBus.$on(\"tree-go-left\", this.goLeft);\r\n    eventBus.$on(\"tree-go-right\", this.goRight);\r\n    eventBus.$on(\"document-save\", this.saveDocument);\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions({\r\n      saveDocumentAction: \"saveDocument\",\r\n    }),\r\n    isDraggedOver(node) {\r\n      return (\r\n        this.nodeDrag?.target?.data._gid === node._gid &&\r\n        this.nodeDrag?.source?.data._gid !== node._gid &&\r\n        !node.isRoot\r\n      );\r\n    },\r\n    startDrag(evt, node) {\r\n      evt.dataTransfer.dropEffect = \"move\";\r\n      evt.dataTransfer.effectAllowed = \"move\";\r\n      node.data.collapsed = true;\r\n      this.nodeDrag.source = node;\r\n    },\r\n    onDrag() {\r\n      this.nodeDrag.dragging = true;\r\n    },\r\n    onDrop(_, node) {\r\n      if (this.nodeDrag.target && this.nodeDrag.target !== node)\r\n        tree.cloneNode(\r\n          node.data,\r\n          this.nodeDrag.target.data,\r\n          this.nodeDrag.snap\r\n        );\r\n      node.collapsed = false;\r\n      this.nodeDrag.dragging = false;\r\n      this.nodeDrag.target = null;\r\n      this.nodeDrag.source = null;\r\n    },\r\n    mouseOverNode(e, node) {\r\n      if (!this.nodeDrag.dragging || node.isRoot) return;\r\n      this.nodeDrag.target = node;\r\n      let rect = e.target.getBoundingClientRect();\r\n      let x = e.clientX - rect.left;\r\n      let y = e.clientY - rect.top;\r\n      let yHalf = rect.height / 2;\r\n\r\n      if (x > rect.width - rect.width / 4) {\r\n        this.nodeDrag.snap = \"right\";\r\n      } else if (y < yHalf) {\r\n        this.nodeDrag.snap = \"top\";\r\n      } else if (y >= yHalf) {\r\n        this.nodeDrag.snap = \"bottom\";\r\n      }\r\n    },\r\n    mouseLeaveNode(_, node) {\r\n      if (node.data._gid !== this.nodeDrag?.target?.data._gid) return;\r\n      this.nodeDrag.target = null;\r\n    },\r\n    beforeUnload() {\r\n      this.saveDocument();\r\n      window.removeEventListener(\"unload\", this.beforeUnload);\r\n    },\r\n    spliceRootsQuery(n = 1) {\r\n      tree.spliceRootsQuery(n);\r\n    },\r\n    pushRootToQuery() {\r\n      if (tree.lastNode && tree.lastNode.getChildren().length)\r\n        tree.pushRootToQuery(tree.lastNode);\r\n    },\r\n    sortTree(by, direction) {\r\n      tree.sortLastNode(by, direction);\r\n    },\r\n    addSibling() {\r\n      tree.addSibling();\r\n      this.focusInput(`node-#${tree.lastNode._gid}`);\r\n      this.saveDocument();\r\n    },\r\n    addChild() {\r\n      tree.addChild();\r\n      this.focusInput(`node-#${tree.lastNode._gid}`);\r\n      this.saveDocument();\r\n    },\r\n    toggleDone() {\r\n      tree.lastNode.toggleDoneState();\r\n    },\r\n    shouldDisplayProgress(node) {\r\n      return node?.settings?.displayProgress;\r\n    },\r\n    doAllChildren() {\r\n      tree.lastNode.setAllChildrenDoneState(true);\r\n    },\r\n    undoAllChildren() {\r\n      tree.lastNode.setAllChildrenDoneState(false);\r\n    },\r\n    toggleEmoji(emoji) {\r\n      tree.lastNode.toggleEmoji(emoji);\r\n    },\r\n    emojifyArray(array) {\r\n      if (!array?.length) return \"\";\r\n      return array.map((a) => emojis.get(a));\r\n    },\r\n    setLastNode(node, event) {\r\n      if (event?.which === 1 && tree.lastNode._gid === node._gid)\r\n        return this.collapseLastNode();\r\n      tree.lastNode = node;\r\n      this.$refs?.contextMenu?.close();\r\n    },\r\n    editLastNode(e) {\r\n      if (!tree.lastNode.editing) e?.preventDefault();\r\n      tree.editLastNode();\r\n      this.focusInput(`node-#${tree.lastNode._gid}`);\r\n      this.saveDocument();\r\n    },\r\n    blurLastNode(triggerNode) {\r\n      tree.blurLastNode(triggerNode);\r\n    },\r\n    collapseLastNode() {\r\n      tree.collapseLastNode();\r\n    },\r\n    deleteLastNode() {\r\n      tree.deleteLastNode();\r\n      this.saveDocument();\r\n    },\r\n    cancelNodeEdit() {\r\n      tree.lastNode.firstEdit\r\n        ? tree.deleteLastNode({ force: true })\r\n        : (tree.lastNode.editing = false);\r\n    },\r\n\r\n    goUp() {\r\n      tree.goUp();\r\n    },\r\n    goDown() {\r\n      tree.goDown();\r\n    },\r\n    goLeft() {\r\n      tree.goLeft();\r\n    },\r\n    goRight() {\r\n      tree.goRight();\r\n    },\r\n    clickedText(node) {\r\n      this.setLastNode(node.data);\r\n    },\r\n    clickedNode(node) {\r\n      this.setLastNode(node);\r\n      tree.collapseLastNode();\r\n    },\r\n    focusInput(ref) {\r\n      if (!ref) return;\r\n      this.$nextTick(() => {\r\n        const input = this.$refs[ref];\r\n        if (input && input[0]) input[0].focus();\r\n      });\r\n    },\r\n    saveDocument() {\r\n      this.saveDocumentAction(tree.exportToStore());\r\n    },\r\n\r\n    handleZoom(e) {\r\n      if (e.which === 2) return this.restoreScale();\r\n      if (!e.which) {\r\n        ((e.deltaY || -e.wheelDelta || e.detail) >> 10 || 1) < 0\r\n          ? this.zoomIn()\r\n          : this.zoomOut();\r\n      }\r\n    },\r\n    init() {\r\n      this.draw();\r\n      this.enableDrag();\r\n      this.initTransform();\r\n    },\r\n    zoomIn() {\r\n      const originTransformStr = this.$refs.domContainer?.style?.transform;\r\n      if (!originTransformStr) return;\r\n      let targetScale = 1 * 1.2;\r\n      const scaleMatchResult = originTransformStr.match(MATCH_SCALE_REGEX);\r\n      if (scaleMatchResult && scaleMatchResult.length > 0) {\r\n        const originScale = parseFloat(scaleMatchResult[1]);\r\n        targetScale *= originScale;\r\n      }\r\n      this.setScale(targetScale);\r\n    },\r\n    zoomOut() {\r\n      const originTransformStr = this.$refs.domContainer?.style?.transform;\r\n      if (!originTransformStr) return;\r\n      let targetScale = 1 / 1.2;\r\n      const scaleMatchResult = originTransformStr.match(MATCH_SCALE_REGEX);\r\n      if (scaleMatchResult && scaleMatchResult.length > 0) {\r\n        const originScale = parseFloat(scaleMatchResult[1]);\r\n        targetScale = originScale / 1.2;\r\n      }\r\n      this.setScale(targetScale);\r\n    },\r\n    restoreScale() {\r\n      this.setScale(1);\r\n    },\r\n    setScale(scaleNum) {\r\n      if (typeof scaleNum !== \"number\") return;\r\n      let pos = this.getTranslate();\r\n      if (!pos) return;\r\n      let translateString = `translate(${pos[0]}px, ${pos[1]}px)`;\r\n      if (!this.$refs.domContainer?.style?.transform) return;\r\n      this.$refs.svg.style.transform = `scale(${scaleNum}) ` + translateString;\r\n      this.$refs.domContainer.style.transform =\r\n        `scale(${scaleNum}) ` + translateString;\r\n      this.currentScale = scaleNum;\r\n    },\r\n    getTranslate() {\r\n      let string = this.$refs.svg?.style.transform;\r\n      if (!string) return;\r\n      let match = string.match(MATCH_TRANSLATE_REGEX);\r\n      if (match === null) {\r\n        return [null, null];\r\n      }\r\n      let x = parseInt(match[1]);\r\n      let y = parseInt(match[2]);\r\n      return [x, y];\r\n    },\r\n    addUniqueKey(rootNode) {\r\n      const queue = [rootNode];\r\n      while (queue.length !== 0) {\r\n        const node = queue.pop();\r\n        node._key = uuid();\r\n        if (node.children) {\r\n          queue.push(...node.children);\r\n        }\r\n      }\r\n      return rootNode;\r\n    },\r\n    initTransform() {\r\n      const containerHeight = this.$refs.container.offsetHeight;\r\n      this.initTransformX = Math.floor(this.config.nodeWidth);\r\n      this.initTransformY = Math.floor(containerHeight / 2);\r\n    },\r\n    generateLinkPath(d) {\r\n      if (this.linkStyle === LinkStyle.CURVE) {\r\n        const linkPath = d3.linkHorizontal();\r\n        linkPath\r\n          .x(function (d) {\r\n            return d.x;\r\n          })\r\n          .y(function (d) {\r\n            return d.y;\r\n          })\r\n          .source(function (d) {\r\n            const sourcePoint = {\r\n              x: d.source.x,\r\n              y: d.source.y,\r\n            };\r\n            return rotatePoint(sourcePoint);\r\n          })\r\n          .target(function (d) {\r\n            const targetPoint = {\r\n              x: d.target.x,\r\n              y: d.target.y,\r\n            };\r\n            return rotatePoint(targetPoint);\r\n          });\r\n        return linkPath(d);\r\n      }\r\n      if (this.linkStyle === LinkStyle.STRAIGHT) {\r\n        // the link path is: source -> secondPoint -> thirdPoint -> target\r\n        const linkPath = d3.path();\r\n        let sourcePoint = { x: d.source.x, y: d.source.y };\r\n        let targetPoint = { x: d.target.x, y: d.target.y };\r\n        sourcePoint = rotatePoint(sourcePoint);\r\n        targetPoint = rotatePoint(targetPoint);\r\n        const xOffset = targetPoint.x - sourcePoint.x;\r\n        const secondPoint = {\r\n          x: sourcePoint.x + xOffset / 2,\r\n          y: sourcePoint.y,\r\n        };\r\n        const thirdPoint = { x: sourcePoint.x + xOffset / 2, y: targetPoint.y };\r\n        linkPath.moveTo(sourcePoint.x, sourcePoint.y);\r\n        linkPath.lineTo(secondPoint.x, secondPoint.y);\r\n        linkPath.lineTo(thirdPoint.x, thirdPoint.y);\r\n        linkPath.lineTo(targetPoint.x, targetPoint.y);\r\n        return linkPath.toString();\r\n      }\r\n    },\r\n    draw() {\r\n      const [nodeDataList, linkDataList] = this.buildTree(this.tree.root);\r\n      this.linkDataList = linkDataList;\r\n      this.svg = this.d3.select(this.$refs.svg);\r\n\r\n      const self = this;\r\n      const links = this.svg.selectAll(\".link\").data(linkDataList, (d) => {\r\n        return `${d.source.data._key}-${d.target.data._key}`;\r\n      });\r\n\r\n      links\r\n        .enter()\r\n        .append(\"path\")\r\n        // .style(\"opacity\", 0)\r\n        // .transition()\r\n        // .duration(ANIMATION_DURATION)\r\n        // .ease(d3.easeCubicInOut)\r\n        // .style(\"opacity\", 1)\r\n        .attr(\"class\", \"link\")\r\n        .attr(\"d\", function (d) {\r\n          return self.generateLinkPath(d);\r\n        });\r\n      links\r\n        .transition()\r\n        .duration(ANIMATION_DURATION)\r\n        .ease(d3.easeCubicInOut)\r\n        .attr(\"d\", function (d) {\r\n          return self.generateLinkPath(d);\r\n        });\r\n      links\r\n        .exit()\r\n        .transition()\r\n        .duration(ANIMATION_DURATION / 2)\r\n        .ease(d3.easeCubicInOut)\r\n        .style(\"opacity\", 0)\r\n        .remove();\r\n\r\n      this.nodeDataList = nodeDataList;\r\n    },\r\n    buildTree(rootNode) {\r\n      const treeBuilder = this.d3\r\n        .tree()\r\n        .nodeSize([this.config.nodeWidth, this.config.levelHeight]);\r\n      const tree = treeBuilder(this.d3.hierarchy(rootNode));\r\n      layout(tree);\r\n      return [tree.descendants(), tree.links()];\r\n    },\r\n    enableDrag() {\r\n      const svgElement = this.$refs.svg;\r\n      const container = this.$refs.container;\r\n      let startX = 0;\r\n      let startY = 0;\r\n      let isDrag = false;\r\n      let mouseDownTransform = \"\";\r\n      container.onmousedown = (event) => {\r\n        mouseDownTransform = svgElement.style.transform;\r\n        startX = event.clientX;\r\n        startY = event.clientY;\r\n        isDrag = true;\r\n      };\r\n      container.onmousemove = (event) => {\r\n        if (!isDrag) return;\r\n        const originTransform = mouseDownTransform;\r\n        let originOffsetX = 0;\r\n        let originOffsetY = 0;\r\n        if (originTransform) {\r\n          const result = originTransform.match(MATCH_TRANSLATE_REGEX);\r\n          if (result !== null && result.length !== 0) {\r\n            const [offsetX, offsetY] = result.slice(1);\r\n            originOffsetX = parseInt(offsetX);\r\n            originOffsetY = parseInt(offsetY);\r\n          }\r\n        }\r\n        let newX =\r\n          Math.floor((event.clientX - startX) / this.currentScale) +\r\n          originOffsetX;\r\n        let newY =\r\n          Math.floor((event.clientY - startY) / this.currentScale) +\r\n          originOffsetY;\r\n        let transformStr = `translate(${newX}px, ${newY}px)`;\r\n        if (originTransform) {\r\n          transformStr = originTransform.replace(\r\n            MATCH_TRANSLATE_REGEX,\r\n            transformStr\r\n          );\r\n        }\r\n        svgElement.style.transform = transformStr;\r\n        this.$refs.domContainer.style.transform = transformStr;\r\n      };\r\n\r\n      container.onmouseleave = () => {\r\n        startX = 0;\r\n        startY = 0;\r\n        isDrag = false;\r\n      };\r\n\r\n      container.onmouseup = () => {\r\n        startX = 0;\r\n        startY = 0;\r\n        isDrag = false;\r\n      };\r\n    },\r\n    formatDimension(dimension) {\r\n      if (typeof dimension === \"number\") return `${dimension}px`;\r\n      if (dimension.indexOf(\"px\") !== -1) {\r\n        return dimension;\r\n      } else {\r\n        return `${dimension}px`;\r\n      }\r\n    },\r\n    parseDimensionNumber(dimension) {\r\n      if (typeof dimension === \"number\") {\r\n        return dimension;\r\n      }\r\n      return parseInt(dimension.replace(\"px\", \"\"));\r\n    },\r\n    nodeContextClick(event, node) {\r\n      event.preventDefault();\r\n      this.setLastNode(node);\r\n      this.$refs.contextMenu?.open(event);\r\n    },\r\n  },\r\n  watch: {\r\n    \"tree.root\": {\r\n      deep: true,\r\n      immediate: true,\r\n      handler() {\r\n        this.draw();\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.tree-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  .node {\r\n    border-radius: 0.6rem;\r\n    box-sizing: border-box;\r\n    border: 1px solid grey;\r\n    background-color: var(--node-bg-clr);\r\n    color: black;\r\n    user-select: none;\r\n    height: fit-content;\r\n    position: relative;\r\n\r\n    .content {\r\n      display: flex;\r\n      flex-direction: row;\r\n      gap: 0.5rem;\r\n      margin: 1rem;\r\n      position: relative;\r\n    }\r\n\r\n    .progress {\r\n      position: absolute;\r\n      overflow: hidden;\r\n      bottom: 0;\r\n      height: 0.4rem;\r\n      background-color: rgb(44, 189, 44);\r\n      border-bottom-left-radius: 0.5rem;\r\n      font-size: 0.8rem;\r\n      color: white;\r\n      transition: width 1s ease;\r\n      span {\r\n        margin-left: 0.4rem;\r\n      }\r\n\r\n      &.round-right {\r\n        border-bottom-right-radius: 0.5rem;\r\n      }\r\n    }\r\n    &.dragover {\r\n      border: 0.2rem solid var(--secondary-clr);\r\n      opacity: 1;\r\n    }\r\n    &.done {\r\n      background-color: var(--primary-clr);\r\n    }\r\n    &.done pre {\r\n      text-decoration: line-through;\r\n    }\r\n    pre {\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      max-height: 150px;\r\n      margin: 0;\r\n      padding: 0;\r\n      text-align: center;\r\n      height: fit-content;\r\n      font-family: var(--font-family);\r\n      white-space: pre-line;\r\n      word-wrap: break-word;\r\n      overflow: auto;\r\n    }\r\n    .drill-up {\r\n      align-self: center;\r\n    }\r\n    textarea {\r\n      margin: 0.5rem;\r\n      height: 4rem;\r\n      width: calc(100% - 1.5rem);\r\n      font-size: 1rem;\r\n      font-family: var(--font-family);\r\n      resize: vertical;\r\n      max-height: 150px;\r\n    }\r\n    &:not(.highlighted) .controls {\r\n      display: none;\r\n    }\r\n    button {\r\n      cursor: pointer;\r\n      outline: none;\r\n      border: 1px solid var(--secondary-clr);\r\n      border-radius: 0.4rem;\r\n      box-sizing: border-box;\r\n      background-color: white;\r\n    }\r\n    button:active {\r\n      border: 1px solid white;\r\n    }\r\n    .add-sibling {\r\n      position: absolute;\r\n      top: 50%;\r\n      transform: translateY(-50%);\r\n      left: calc(100% + 1rem);\r\n    }\r\n    .add-child {\r\n      position: absolute;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n      top: calc(100% + 0.5rem);\r\n    }\r\n  }\r\n\r\n  .link {\r\n    stroke-width: 2px !important;\r\n    fill: transparent !important;\r\n    stroke: var(--node-link-clr) !important;\r\n  }\r\n}\r\n\r\n.tree-container.dragging .link {\r\n  opacity: 0.2;\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tree-container {\r\n  position: relative;\r\n  overflow: hidden;\r\n\r\n  .vue-tree {\r\n    position: relative;\r\n  }\r\n\r\n  > svg,\r\n  .dom-container {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    overflow: visible;\r\n    transform-origin: 0 50%;\r\n  }\r\n\r\n  .dom-container {\r\n    z-index: 1;\r\n    // pointer-events: none;\r\n  }\r\n\r\n  &.dragging .node {\r\n    opacity: 0.7;\r\n  }\r\n}\r\n\r\n.node-slot {\r\n  cursor: pointer;\r\n  position: absolute;\r\n  background-color: transparent;\r\n  box-sizing: border-box;\r\n  transform: translate(-50%, -50%);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-sizing: content-box;\r\n\r\n  .node-slot-overlay {\r\n    position: relative;\r\n\r\n    // top\r\n    &.node-top::before {\r\n      content: \"\";\r\n      display: inline-block;\r\n      width: 15px;\r\n      height: 15px;\r\n      margin-right: 5px;\r\n      position: absolute;\r\n      bottom: calc(100% + 0.5rem);\r\n      width: 100%;\r\n      height: 3rem;\r\n      text-align: center;\r\n      background-color: white;\r\n      border-radius: 1rem;\r\n    }\r\n\r\n    // bottom\r\n    &.node-bottom::before {\r\n      content: \"\";\r\n      display: inline-block;\r\n      width: 15px;\r\n      height: 15px;\r\n      margin-right: 5px;\r\n      position: absolute;\r\n      top: calc(100% + 0.5rem);\r\n      width: 100%;\r\n      height: 3rem;\r\n      text-align: center;\r\n      background-color: white;\r\n      border-radius: 1rem;\r\n    }\r\n\r\n    // right\r\n    &.node-right::before {\r\n      content: \"\";\r\n      width: 15px;\r\n      height: 15px;\r\n      margin-right: 5px;\r\n      position: absolute;\r\n      left: calc(100% + 0.5rem);\r\n      width: 50%;\r\n      height: 3rem;\r\n      text-align: center;\r\n      background-color: white;\r\n      border-radius: 1rem;\r\n    }\r\n  }\r\n}\r\n\r\n.highlighted {\r\n  border: 2px solid var(--secondary-clr);\r\n}\r\n\r\n.stack {\r\n  position: relative;\r\n}\r\n\r\n.stack,\r\n.stack::before,\r\n.stack::after {\r\n  box-shadow: 2px 1px 1px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.stack::before,\r\n.stack::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: white;\r\n  border-radius: 1rem;\r\n}\r\n\r\n/* Second sheet of stack */\r\n.stack::before {\r\n  left: 4px;\r\n  top: 4px;\r\n  z-index: -1;\r\n}\r\n\r\n/* Third sheet of stack */\r\n.stack::after {\r\n  left: 8px;\r\n  top: 8px;\r\n  z-index: -2;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tree.vue?vue&type=template&id=5afa723f&scoped=true&\"\nimport script from \"./Tree.vue?vue&type=script&lang=js&\"\nexport * from \"./Tree.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tree.vue?vue&type=style&index=0&id=5afa723f&lang=scss&scoped=true&\"\nimport style1 from \"./Tree.vue?vue&type=style&index=1&lang=scss&\"\nimport style2 from \"./Tree.vue?vue&type=style&index=2&id=5afa723f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5afa723f\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <tree v-if=\"tree.loaded\"></tree>\n  </div>\n</template>\n\n<script>\nimport Tree from \"@/components/Tree\";\nimport { tree } from \"@/tree\";\n\nexport default {\n  name: \"App\",\n  components: {\n    Tree,\n  },\n  data() {\n    return {\n      tree,\n    };\n  },\n};\n</script>\n\n<style>\n@import url(\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\");\n\n:root {\n  --body-bg-clr: #eef2f5;\n  --primary-clr: #eef2f5;\n  --secondary-clr: #a03bc3;\n  --node-bg-clr: white;\n  --node-link-clr: #a03bc3;\n  --node-bg-secondary-clr: #282c34;\n  --context-menu-bg-clr: #293845;\n  --context-menu-item-hover-clr: #a03bc3;\n  --hr-clr: #6e6b74;\n  --max-height: calc(100vh - 1.5rem);\n  --text-primary: rgba(255, 255, 255, 0.6);\n  --text-secondary: rgba(255, 255, 255, 0.87);\n\n  --font-family: \"Roboto\", sans-serif;\n}\n\nhtml,\nbody {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  background-color: var(--body-bg-clr);\n}\n\n#app {\n  font-family: var(--font-family);\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  width: 100%;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=44676804&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport { store } from \"@/store\";\n\nimport { Init } from \"@/hotkeys\";\nInit();\n\nimport VModal from \"vue-js-modal\";\nVue.use(VModal, { componentName: \"Modal\" });\n\nimport { ModalPlugin, BootstrapVueIcons } from \"bootstrap-vue\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\nVue.use(BootstrapVueIcons);\nVue.use(ModalPlugin);\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: (h) => h(App),\n  store,\n}).$mount(\"#app\");\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContextMenu.vue?vue&type=style&index=0&id=6d6d2422&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tree.vue?vue&type=style&index=2&id=5afa723f&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiBar.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportJSON.vue?vue&type=style&index=0&id=864979cc&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=style&index=0&id=a6551280&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tree.vue?vue&type=style&index=0&id=5afa723f&lang=scss&scoped=true&\""],"sourceRoot":""}