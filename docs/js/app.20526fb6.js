(function(t){function e(e){for(var i,s,r=e[0],l=e[1],d=e[2],h=0,u=[];h<r.length;h++)s=r[h],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&u.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(u.length)u.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={app:0},a=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/node-tree-editor/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var c=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1115:function(t,e,n){"use strict";n("ce69")},1502:function(t,e,n){"use strict";n("6fa0")},"31f4":function(t,e,n){"use strict";n("8748")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("tree")],1)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("modal",{attrs:{name:"info-modal",adaptive:!0,height:"auto",width:"500px"}},[n("div",{attrs:{id:"modal"}},[n("table",{staticClass:"info-table"},t._l(t.events,(function(e,i){return n("tr",{key:i,staticClass:"info-row"},[n("td",{staticClass:"info-col-action"},[t._v(" "+t._s(e.name)+" ")]),n("td",{staticClass:"info-col-hotkey"},[t._v(" "+t._s(e.hotkey.join(" / "))+" ")])])})),0)])]),n("button",{attrs:{id:"modal-button"},on:{click:function(e){return t.$modal.show("info-modal")}}},[n("svg",{staticClass:"bi bi-question",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"}})])]),n("documents-list",{on:{"doc-create":function(e){return t.createNewDocument()},"doc-select":function(e){return t.setDocument.apply(void 0,e)},"doc-delete":function(e){return t.deleteDocument.apply(void 0,e)}}}),n("div",{ref:"container",staticClass:"tree-container"},[n("svg",{ref:"svg",staticClass:"svg vue-tree",style:t.initialTransformStyle}),n("div",{ref:"domContainer",staticClass:"dom-container",style:t.initialTransformStyle},t._l(t.nodeDataList,(function(e){return n("div",{key:e.data._key,staticClass:"node-slot",style:{left:t.formatDimension(e.y),top:t.formatDimension(e.x),width:t.formatDimension(t.config.nodeWidth),height:t.formatDimension(t.config.nodeHeight)}},[n("div",{staticClass:"node",class:{highlighted:e.data._gid===t.dataset.lastNode._gid,stack:e.data.childrenLength&&e.data.collapsed},on:{click:function(n){return t.setLastNode(e.data)}}},[e.data.editing?n("input",{directives:[{name:"model",rawName:"v-model",value:e.data._name,expression:"node.data._name"}],ref:"node-#"+e.data._gid,refInFor:!0,domProps:{value:e.data._name},on:{blur:t.blurLastNode,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelNodeEdit(e)},input:function(n){n.target.composing||t.$set(e.data,"_name",n.target.value)}}}):n("span",{staticClass:"tree-node"},[t._v(t._s(e.data.name)+" ")])])])})),0)])],1)},r=[],l=n("3835"),d=n("2909"),c=(n("a15b"),n("99af"),n("466d"),n("ac1f"),n("d3b7"),n("25f0"),n("fb6a"),n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"docs"},[n("button",{staticClass:"doc-menu-toggle",on:{click:function(e){t.showMenu=!t.showMenu}}},[n("svg",{staticClass:"bi bi-file-earmark-text",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5z"}}),n("path",{attrs:{d:"M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5L9.5 0zm0 1v2A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showMenu,expression:"showMenu"}],staticClass:"doc-menu"},[n("button",{on:{click:function(e){return t.emit("doc-create")}}},[n("svg",{staticClass:"bi bi-file-earmark-plus",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M8 6.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 .5-.5z"}}),n("path",{attrs:{d:"M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"}})])]),n("div",{staticClass:"doc-list"},t._l(t.store.documents,(function(e,i){return n("div",{key:i,staticClass:"doc",class:{active:t.activeDoc(e.name)}},[n("span",{on:{click:function(n){!t.activeDoc(e.name)&&t.emit("doc-select",e.name)}}},[t._v(t._s(e.name))]),n("button",{on:{click:function(n){return t.emit("doc-delete",e.name)}}},[t._v("delete")])])})),0)])])}),h=[],u=(n("b0c0"),n("d4ec")),f=n("bee2"),v=(n("d81d"),n("4de4"),n("b64b"),n("2ca0"),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{rawName:!1,unique:!1};Object(u["a"])(this,t),this._name=e||"mindmapdocument-".concat(Date.now()),this._schema=n,this._options=i;var o=this.load(),a=o.lastEdit,s=o.data;this._lastEdit=a,this._data=s}return Object(f["a"])(t,[{key:"save",value:function(t){t||(t=this._data);var e=JSON.stringify({lastEdit:Date.now(),data:t});localStorage.setItem(this._name,e)}},{key:"load",value:function(){return g(this._name)||localStorage.setItem(this._name,JSON.stringify({lastEdit:0,data:this._schema})),JSON.parse(localStorage.getItem(this._name))||{lastEdit:Date.now(),data:[]}}},{key:"set",value:function(t,e){this._data[t]=e}},{key:"get",value:function(t){return this._data[t]}},{key:"name",get:function(){return this._name}}]),t}()),m=function(){function t(){Object(u["a"])(this,t),this._documents=[],this._document=null,this._settings=null,this._loaded=!1,this.load()}return Object(f["a"])(t,[{key:"load",value:function(){this.getDocumentsList(),this._settings=new v("settings",{lastDocument:""},{rawName:!0,unique:!0}),this._document=new v(this._settings.get("lastDocument"),{name:"",children:[]}),this._settings.set("lastDocument",this._document._name),this._loaded=!0}},{key:"save",value:function(t){this._loaded&&(this._settings.save(),this._document.save(t))}},{key:"setDocument",value:function(t){if(t)return g(t)?(this.document=t,this.data):void 0}},{key:"newDocument",value:function(){return this._document=new v(void 0,{name:"",children:[]}),this._settings.set("lastDocument",this._document._name),this.getDocumentsList(),this._document._data}},{key:"deleteDocument",value:function(t){if(t)return g(t)?(localStorage.removeItem(t),this.getDocumentsList(),this._document.name===t&&(this._documents.length?this._document=this._documents[this._documents.length-1]:this.document="mindmapdocument-1"),this._settings.set("lastDocument",this._document.name),this.getDocumentsList(),this.data):void 0}},{key:"getDocumentsList",value:function(){this._documents=Object.keys(localStorage).filter((function(t){return t.startsWith("mindmapdocument")})).map((function(t){return new v(t)}))}},{key:"data",get:function(){return this._document._data}},{key:"document",get:function(){return this._document},set:function(t){this._document=new v(t,{lastEdit:0,children:[]})}},{key:"documents",get:function(){return this._documents}},{key:"lastDocument",set:function(t){this._settings&&this._settings.set("lastDocument",t)}}]),t}();function g(t){return null!==localStorage.getItem(t)}var p=new m,_={name:"DocumentsList",data:function(){return{store:p,showMenu:!1}},methods:{emit:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.$emit(t,n)},activeDoc:function(t){var e;return t===(null===(e=p.document)||void 0===e?void 0:e.name)}}},y=_,N=(n("5ed4"),n("2877")),k=Object(N["a"])(y,c,h,!1,null,"74ea0ba5",null),w=k.exports,b=n("5698"),D=n("b85c"),L=(n("a434"),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];Object(u["a"])(this,t),this._gid=e,this._id=n,this._name=a,this._parentNode=i,this._children=r,this._collapsed=!1,this._depth=o,this._el=null,this._editing=!!s&&null!==i,this._firstEdit=s}return Object(f["a"])(t,[{key:"addChild",value:function(e){e instanceof t&&this._children.push(e)}},{key:"id",get:function(){return this._id}},{key:"parent",get:function(){return this._parentNode}},{key:"children",get:function(){return this.collapsed?[]:this._children},set:function(t){this._children=t}},{key:"collapsed",get:function(){return this._collapsed},set:function(t){this._children.length&&(this._collapsed=t)}},{key:"name",get:function(){return this._name||"node #".concat(this._gid)},set:function(t){this._name=t,this.editing=!1}},{key:"editing",get:function(){return this._editing},set:function(t){this._editing=t,this._firstEdit=!1}},{key:"depth",get:function(){return this._depth}},{key:"childrenLength",get:function(){return this._children.length}},{key:"firstEdit",get:function(){return this._firstEdit}},{key:"el",get:function(){return this._el},set:function(t){this._el=t}}]),t}()),x=function(){function t(){Object(u["a"])(this,t),this._name="root",this._root=new L(this.counter,0,null,0),this.lastNode=this._root,this._counter=0,this.parseTreeData(p.data)}return Object(f["a"])(t,[{key:"addSibling",value:function(){if(this._lastNode.editing)return this._lastNode.editing=!1;var t=this.createNode(this.lastNodeID,this.lastNodeParent?this.lastNodeParent:this._root,this._lastNode.depth||1);this.lastNodeParent?this.pushNode(this.lastNodeParent.children,t):this.pushNode(this._root.children,t),this.lastNode=t}},{key:"addChild",value:function(){this._lastNode.editing&&(this._lastNode._firstEdit?this.deleteLastNode():this._lastNode.editing=!1);var t=this._lastNode?this._lastNode.children.length:this.lastNodeID,e=this.createNode(t,this._lastNode,(this._lastNode.depth||0)+1);this._lastNode?this.pushNode(this._lastNode.children,e):this.pushNode(this._root,e),this.lastNode=e,this.lastNodeParent.collapsed=!1}},{key:"pushNode",value:function(t,e){t.push(e)}},{key:"createNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return new L(this.counter,t,e,n)}},{key:"deleteLastNode",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{force:!1};if(!this._lastNode.editing&&this.lastNodeParent||n.force){var i=null;i=this._lastNode.id-1>=0?this.lastNodeParent.children[this._lastNode.id-1]:null!==(t=this.lastNodeParent)&&void 0!==t&&null!==(e=t.parent)&&void 0!==e&&e.children?this.lastNodeParent.parent.children[this.lastNodeParent.parent.children.length-1]:this.lastNodeParent,this.lastNodeParent.children.splice(this._lastNode.id,1),this.lastNode=i}}},{key:"collapseLastNode",value:function(){this._lastNode.editing||(this._lastNode.collapsed=!this._lastNode.collapsed)}},{key:"editLastNode",value:function(){this._lastNode.editing||(this._lastNode.editing=!this._lastNode.editing)}},{key:"blurLastNode",value:function(){this._lastNode._firstEdit?this.deleteLastNode():this._lastNode.editing=!1}},{key:"goUp",value:function(){var t;if(!this._lastNode.editing)if(this._lastNode.id-1>=0)this.lastNode=this.lastNodeParent.children[this._lastNode.id-1];else if((null===(t=this.lastNodeParent)||void 0===t?void 0:t.id)>0&&this.lastNodeParent.parent){for(var e,n=this.lastNodeParent.id-1;n>=0;n--)if(this.lastNodeParent.parent.children[n].children.length){e=this.lastNodeParent.parent.children[n];break}e&&(this.lastNode=e.children[e.children.length-1])}}},{key:"goDown",value:function(){if(!this._lastNode.editing&&this.lastNodeParent)if(this._lastNode.id+1<this.lastNodeParent.children.length)this.lastNode=this.lastNodeParent.children[this._lastNode.id+1];else if(this.lastNodeParent.parent&&this.lastNodeParent.id<this.lastNodeParent.parent.children.length){for(var t,e=this.lastNodeParent.id+1;e<this.lastNodeParent.parent.children.length;e++)if(this.lastNodeParent.parent.children[e].children.length){t=this.lastNodeParent.parent.children[e];break}t&&(this.lastNode=t.children[0])}}},{key:"goLeft",value:function(){var t,e;this._lastNode.editing||null!==(t=this._lastNode)&&void 0!==t&&null!==(e=t.parent)&&void 0!==e&&e.parent&&(this.lastNode=this._lastNode.parent)}},{key:"goRight",value:function(){if(!this._lastNode.editing&&this._lastNode&&this._lastNode.children.length){var t=Math.floor(this._lastNode.children.length/2);this.lastNode=this._lastNode.children[t]}}},{key:"exportToStore",value:function(){return t(this);function t(e){var n;return{name:e.name,children:null!==e&&void 0!==e&&null!==(n=e.children)&&void 0!==n&&n.length?e.children.map((function(e){return e.children.length?t(e):{name:e.name,children:[]}})):[]}}}},{key:"parseTreeData",value:function(t){if(t){var e=this;if(this._root.children=[],this._lastNode=this._root,this._counter=0,t.children){var n,i=Object(D["a"])(t.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;a(o,this._root)}}catch(r){i.e(r)}finally{i.f()}}}function a(t,n){var i=new L(e.counter,n.children.length,n,n.depth+1||0,t.name,!1);i.children=t.children.length?s(t,i):[],n.children.push(i)}function s(t,n){var i;return null===t||void 0===t||null===(i=t.children)||void 0===i?void 0:i.map((function(t,i){var o=new L(e.counter,i,n,n.depth+1,t.name,!1);return o.children=null!==t&&void 0!==t&&t.children.length?s(t,o):[],o}))}}},{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._root.children}},{key:"lastNodeID",get:function(){return this.lastNodeParent?this.lastNodeParent.children.length:this._root.children.length}},{key:"lastNode",get:function(){return this._lastNode},set:function(t){var e;if(!(t instanceof L))return null!==t&&void 0!==t&&t._root?null:console.error("".concat(t," is not instance of Node"));null!==this&&void 0!==this&&null!==(e=this._lastNode)&&void 0!==e&&e.editing&&(this._lastNode.editing=!1),this._lastNode=t}},{key:"lastNodeParent",get:function(){var t;return(null===(t=this._lastNode)||void 0===t?void 0:t.parent)||null}},{key:"counter",get:function(){return this._counter++}}]),t}(),C=new x,S=new i["a"],P=[{name:"Add child",action:"tree-add-child",hotkey:"tab",options:{prevent:!0}},{name:"Add sibling",action:"tree-add-sibling",hotkey:"enter"},{name:"Collapse last node",action:"tree-node-collapse",hotkey:"c"},{name:"Edit last node",action:"tree-node-edit",hotkey:"e"},{name:"Delete last node",action:"tree-delete-last-node",hotkey:["d","delete","backspace"]},{name:"Cursor up",action:"tree-go-up",hotkey:"arrowup"},{name:"Cursor right",action:"tree-go-right",hotkey:"arrowright"},{name:"Cursor down",action:"tree-go-down",hotkey:"arrowdown"},{name:"Cursor left",action:"tree-go-left",hotkey:"arrowleft"},{name:"Save document",action:"document-save",hotkey:"ctrl+s",options:{prevent:!0}}],O={};function T(){window.addEventListener("keydown",E),window.addEventListener("unload",j);var t,e=Object(D["a"])(P);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hotkey instanceof Array||(n.hotkey=[n.hotkey]);var i,o=Object(D["a"])(n.hotkey);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.toLowerCase();O[s]?console.error("Multiple hotkeys binding on single action: ".concat(n.action)):O[s]=n}}catch(r){o.e(r)}finally{o.f()}}}catch(r){e.e(r)}finally{e.f()}}function E(t){var e=$(t),n=O[e];function i(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{prevent:!1};i.prevent&&t.preventDefault(),S.$emit(e,n)}n&&i(n.action,t,n.options)}function $(t){var e=[];return t.ctrlKey&&"Control"!==t.key&&e.push("ctrl"),t.altKey&&"Alt"!==t.key&&e.push("alt"),t.shiftKey&&"Shift"!==t.key&&e.push("shift"),e.push(t.key.toLowerCase()),e.join("+")}function j(){window.removeEventListener("keydown",E),window.removeEventListener("unload",j)}var I=/translate\((-?\d+)px, ?(-?\d+)px\)/i,M=/scale\((\S*)\)/i,z={CURVE:"curve",STRAIGHT:"straight"},H=200,V=100,U=200,A=0;function R(){for(var t=[],e="0123456789abcdef",n=0;n<36;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}function Y(t){var e=t.x,n=t.y;return{x:n,y:e}}var q={name:"Tree",props:{config:{type:Object,default:function(){return{nodeWidth:H,nodeHeight:V,levelHeight:U}}},linkStyle:{type:String,default:z.CURVE}},components:{DocumentsList:w},data:function(){return{d3:b,events:P,store:p,dataset:C,colors:"568FE1",nodeDataList:[],linkDataList:[],initTransformX:0,initTransformY:0,currentScale:1}},computed:{initialTransformStyle:function(){return{transform:"scale(1) translate(".concat(this.initTransformX,"px, ").concat(this.initTransformY,"px)"),transformOrigin:"center"}}},created:function(){var t=this;this.addUniqueKey(this.dataset),window.addEventListener("wheel",this.handleZoom),window.addEventListener("auxclick",this.handleZoom),window.addEventListener("unload",this.beforeUnload),S.$on("tree-add-sibling",this.addSibling),S.$on("tree-add-child",this.addChild),S.$on("tree-set-last-node",(function(e){e&&e[0]&&t.setLastNode(e[0])})),S.$on("tree-node-collapse",this.collapseLastNode),S.$on("tree-node-edit",(function(e){return t.editLastNode(e)})),S.$on("tree-delete-last-node",this.deleteLastNode),S.$on("tree-delete-last-level",this.deleteLastLevel),S.$on("tree-go-up",this.goUp),S.$on("tree-go-down",this.goDown),S.$on("tree-go-left",this.goLeft),S.$on("tree-go-right",this.goRight),S.$on("document-save",this.saveDocument)},mounted:function(){this.init()},methods:{beforeUnload:function(){this.saveDocument(),window.removeEventListener("wheel",this.handleZoom),window.removeEventListener("auxclick",this.handleZoom),window.removeEventListener("unload",this.beforeUnload)},addSibling:function(){C.addSibling(),this.focusInput("node-#".concat(C.lastNode._gid)),this.saveDocument()},addChild:function(){C.addChild(),this.focusInput("node-#".concat(C.lastNode._gid)),this.saveDocument()},setLastNode:function(t){if(C.lastNode._gid===t._gid)return this.collapseLastNode();C.lastNode=t},editLastNode:function(t){C.lastNode.editing||null===t||void 0===t||t.preventDefault(),C.editLastNode(),this.focusInput("node-#".concat(C.lastNode._gid)),this.saveDocument()},blurLastNode:function(){C.blurLastNode()},collapseLastNode:function(){C.collapseLastNode()},deleteLastNode:function(){C.deleteLastNode(),this.saveDocument()},cancelNodeEdit:function(){C.lastNode.firstEdit?C.deleteLastNode({force:!0}):C.lastNode.editing=!1},goUp:function(){C.goUp()},goDown:function(){C.goDown()},goLeft:function(){C.goLeft()},goRight:function(){C.goRight()},clickedText:function(t){this.setLastNode(t.data)},clickedNode:function(t){this.setLastNode(t),C.collapseLastNode()},focusInput:function(t){var e=this;t&&this.$nextTick((function(){var n=e.$refs[t];n&&n[0]&&n[0].focus()}))},saveDocument:function(){p.save(C.exportToStore())},setDocument:function(t){C.parseTreeData(p.setDocument(t))},createNewDocument:function(){C.parseTreeData(p.newDocument())},deleteDocument:function(t){C.parseTreeData(p.deleteDocument(t))},handleZoom:function(t){if(2===t.which)return this.restoreScale();t.which||(((t.deltaY||-t.wheelDelta||t.detail)>>10||1)<0?this.zoomIn():this.zoomOut())},init:function(){this.draw(),this.enableDrag(),this.initTransform()},zoomIn:function(){var t,e,n=null===(t=this.$refs.domContainer)||void 0===t||null===(e=t.style)||void 0===e?void 0:e.transform;if(n){var i=1.2,o=n.match(M);if(o&&o.length>0){var a=parseFloat(o[1]);i*=a}this.setScale(i)}},zoomOut:function(){var t,e,n=null===(t=this.$refs.domContainer)||void 0===t||null===(e=t.style)||void 0===e?void 0:e.transform;if(n){var i=1/1.2,o=n.match(M);if(o&&o.length>0){var a=parseFloat(o[1]);i=a/1.2}this.setScale(i)}},restoreScale:function(){this.setScale(1)},setScale:function(t){var e,n;if("number"===typeof t){var i=this.getTranslate();if(i){var o="translate(".concat(i[0],"px, ").concat(i[1],"px)");null!==(e=this.$refs.domContainer)&&void 0!==e&&null!==(n=e.style)&&void 0!==n&&n.transform&&(this.$refs.svg.style.transform="scale(".concat(t,") ")+o,this.$refs.domContainer.style.transform="scale(".concat(t,") ")+o,this.currentScale=t)}}},getTranslate:function(){var t,e=null===(t=this.$refs.svg)||void 0===t?void 0:t.style.transform;if(e){var n=e.match(I);if(null===n)return[null,null];var i=parseInt(n[1]),o=parseInt(n[2]);return[i,o]}},addUniqueKey:function(t){var e=[t];while(0!==e.length){var n=e.pop();n._key=R(),n.children&&e.push.apply(e,Object(d["a"])(n.children))}return t},initTransform:function(){var t=this.$refs.container.offsetHeight;this.initTransformX=Math.floor(this.config.nodeWidth),this.initTransformY=Math.floor(t/2)},generateLinkPath:function(t){if(this.linkStyle===z.CURVE){var e=b["linkHorizontal"]();return e.x((function(t){return t.x})).y((function(t){return t.y})).source((function(t){var e={x:t.source.x,y:t.source.y};return Y(e)})).target((function(t){var e={x:t.target.x,y:t.target.y};return Y(e)})),e(t)}if(this.linkStyle===z.STRAIGHT){var n=b["path"](),i={x:t.source.x,y:t.source.y},o={x:t.target.x,y:t.target.y};i=Y(i),o=Y(o);var a=o.x-i.x,s={x:i.x+a/2,y:i.y},r={x:i.x+a/2,y:o.y};return n.moveTo(i.x,i.y),n.lineTo(s.x,s.y),n.lineTo(r.x,r.y),n.lineTo(o.x,o.y),n.toString()}},draw:function(){var t=this.buildTree(this.dataset),e=Object(l["a"])(t,2),n=e[0],i=e[1];this.linkDataList=i,this.svg=this.d3.select(this.$refs.svg);var o=this,a=this.svg.selectAll(".link").data(i,(function(t){return"".concat(t.source.data._key,"-").concat(t.target.data._key)}));a.enter().append("path").style("opacity",0).transition().duration(A).ease(b["easeCubicInOut"]).style("opacity",1).attr("class","link").attr("d",(function(t){return o.generateLinkPath(t)})),a.transition().duration(A).ease(b["easeCubicInOut"]).attr("d",(function(t){return o.generateLinkPath(t)})),a.exit().transition().duration(A/2).ease(b["easeCubicInOut"]).style("opacity",0).remove(),this.nodeDataList=n},buildTree:function(t){var e=this.d3.tree().nodeSize([this.config.nodeWidth,this.config.levelHeight]),n=e(this.d3.hierarchy(t));return[n.descendants(),n.links()]},enableDrag:function(){var t=this,e=this.$refs.svg,n=this.$refs.container,i=0,o=0,a=!1,s="";n.onmousedown=function(t){s=e.style.transform,i=t.clientX,o=t.clientY,a=!0},n.onmousemove=function(n){if(a){var r=s,d=0,c=0;if(r){var h=r.match(I);if(null!==h&&0!==h.length){var u=h.slice(1),f=Object(l["a"])(u,2),v=f[0],m=f[1];d=parseInt(v),c=parseInt(m)}}var g=Math.floor((n.clientX-i)/t.currentScale)+d,p=Math.floor((n.clientY-o)/t.currentScale)+c,_="translate(".concat(g,"px, ").concat(p,"px)");r&&(_=r.replace(I,_)),e.style.transform=_,t.$refs.domContainer.style.transform=_}},n.onmouseup=function(){i=0,o=0,a=!1}},onClickNode:function(t){var e=this.nodeDataList[t];e.data.children?(e.data._children=e.data.children,e.data.children=null,e.data._collapsed=!0):(e.data.children=e.data._children,e.data._children=null,e.data._collapsed=!1),this.draw()},formatDimension:function(t){return"number"===typeof t?"".concat(t,"px"):-1!==t.indexOf("px")?t:"".concat(t,"px")},parseDimensionNumber:function(t){return"number"===typeof t?t:parseInt(t.replace("px",""))}},watch:{dataset:{deep:!0,immediate:!0,handler:function(){this.draw()}}}},J=q,K=(n("1502"),n("31f4"),n("1115"),Object(N["a"])(J,s,r,!1,null,"92c77f3e",null)),W=K.exports,X={name:"App",components:{Tree:W}},Z=X,F=(n("034f"),Object(N["a"])(Z,o,a,!1,null,null,null)),B=F.exports,G=n("1881"),Q=n.n(G);T(),i["a"].use(Q.a,{componentName:"Modal"}),i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(B)}}).$mount("#app")},"5ed4":function(t,e,n){"use strict";n("6132")},6132:function(t,e,n){},"6fa0":function(t,e,n){},"85ec":function(t,e,n){},8748:function(t,e,n){},ce69:function(t,e,n){}});
//# sourceMappingURL=app.20526fb6.js.map